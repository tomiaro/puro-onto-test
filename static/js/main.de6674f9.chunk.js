(this["webpackJsonppuro-onto"]=this["webpackJsonppuro-onto"]||[]).push([[0],{398:function(e){e.exports=JSON.parse('{"classes":["Kind","Subkind","Phase","Role","Collective","Quantity","Relator","Category","RoleMixin","Mixin","Mode","Quality","None"],"bRelationRules":[{"offer":["Characterization","Relator"],"question":"Which type is relation VAL?"}],"relationRules":[{"from":["Mode","Kind"],"to":["Subkind","Role"],"offer":["Arrow"]},{"from":["*"],"to":["Datatype"],"offer":["Row"],"fromT":["*","1","0"],"toT":["*","1","0"]}],"commonRules":[{"childPuro":["none"],"fatherOnto":["none"],"connection":0,"offer":["Subkind"]},{"fatherPuro":"","fatherOnto":"","childPuro":"BType","hasRelation":0,"offer":[0,1,2,3,4,5,6,7,10]},{"fatherPuro":"","fatherOnto":"","childPuro":"BType","hasRelation":0,"offer":[0,1,2,3,4,5,6,7,10]}],"questions":[{"type":"BType","question":"Which type is a VAL?"},{"type":"instance","question":"Which ontoUML elment represents instance VAL?"},{"type":"none","question":"Which element plays TYPE to REL?"},{"type":"singleUniv","question":"What is the TYPE of VAL?"}],"Relator":[{"key":"from","offer":["Kind","Collective","Role"],"Kind":["Role","Subkind"]},{"key":"to","offer":["Role","Kind","Collective"]},{"key":"cardinality","fromT":[1,"1..*"],"toT":[1,"1..*"]}],"Characterization":[{"key":"from","offer":["Kind","Subkind","Role"]},{"key":"to","offer":["Mode","Quality"]},{"key":"cardinality","fromT":[1,"*"],"toT":[1,"*"]}],"Mode":[{"key":"superType","type":[]},{"key":"subType","type":["Subkind","Kind"]}],"Role":[{"key":"superType","type":[]},{"key":"subType","type":[]},{"key":"connect","type":["Relator"]},{"key":"connected","type":["Relator"],"superType":["Kind"],"question":"singleUniv"}],"Kind":[{"key":"superType","type":[]},{"key":"subType","type":[]}],"Subkind":[{"key":"superType","type":["Kind","Mode"]},{"key":"subType","type":[]}]}')},404:function(e,t,n){e.exports=n(905)},411:function(e,t,n){},416:function(e,t){},418:function(e,t){},451:function(e,t){},452:function(e,t){},680:function(e,t,n){var r={"./locale":317,"./locale.js":317};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=680},694:function(e,t){},696:function(e,t){},706:function(e,t,n){var r={"./N3Lexer":191,"./N3Lexer.js":191,"./N3Parser":192,"./N3Parser.js":192,"./N3Store":330,"./N3Store.js":330,"./N3StreamParser":331,"./N3StreamParser.js":331,"./N3StreamWriter":332,"./N3StreamWriter.js":332,"./N3Util":193,"./N3Util.js":193,"./N3Writer":194,"./N3Writer.js":194};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=706},711:function(e,t){},728:function(e,t){},734:function(e,t){},747:function(e,t){},748:function(e,t){},758:function(e,t){},760:function(e,t){},833:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=833},903:function(e,t,n){e.exports=n.p+"static/media/model.7c8b6791.PNG"},905:function(e,t,n){"use strict";n.r(t);var r=n(402),o=n(0),i=n(1),l=n(6),a=n(7),s=n(8),u=n(2),c=n.n(u),h=n(397),f=n.n(h),d=(n(409),n(410),n(411),n(78)),y=n.n(d),p=n(215),m=n.n(p),v=n(17),T=n.n(v),g=n(94),b=n(398),E=function e(){var t,r=this;Object(o.a)(this,e),this.getRelatorBtype=function(e,t){var n="\n            PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            SELECT ?element ?valuation ?elementLabel ?type ?father ?fatherLabel ?elementType ?fatherType WHERE \n            {\n                {<"+e+"> puro:linkedTo ?element . <"+t+"> puro:linkedTo <"+e+">} \n                UNION\n                {?element puro:linkedTo <"+e+"> . <"+e+"> puro:linkedTo <"+t+">}    \n                {?element a puro:BObject}\n                UNION\n                {?element a puro:BType}\n                ?element rdfs:label ?elementLabel .\n                ?element a ?elementType .  \n                OPTIONAL {?element puro:instanceOf ?father}\n                OPTIONAL {?father rdfs:label ?fatherLabel}\n                OPTIONAL {?father a ?fatherType}\n                OPTIONAL {?uri puro:linkedTo ?valuation. ?valuation a puro:BValuation}\n               \n               \n            }";return new Promise((function(t){r.sparqlQuery(n,(function(n){(n=this.deleteDuplicity(n,["valuation"])).relationName=e,t(n)}))}))},this.findBTypeRelation=function(e,t,n){var o=e.uri.value,i="\n             PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n             PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n             SELECT ?uri ?label ?father ?fatherType ?type ?fatherTypeRelation ?connect ?connectFrom ?child ?childType ?childRel WHERE \n             {\n                 {<"+o+"> puro:instanceOf ?uri }\n                 UNION\n                 {<"+o+"> puro:subTypeOf  ?uri }\n                 ?uri a ?type . \n                 ?uri rdfs:label ?label . \n                \n             }";r.sparqlQuery(i,function(e){if(!((e=this.deleteDuplicity(e,["connect","connectFrom","father","fatherType","fatherTypeRelation","child","childType","childRel"])).length>0))return n(t),t;for(var r in e)t.push(e[r]),this.findBTypeRelation(e[r],t,n)}.bind(r))},this.findBTypeChild=function(e,t,n){var o=e.uri.value,i="\n                 PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                 PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                 SELECT ?uri ?valuation ?valuationLabel ?label ?father ?fatherType ?type ?fatherTypeRelation ?connect ?connectFrom ?child ?childType ?childRel WHERE \n                 {\n                     {?uri puro:instanceOf <"+o+">}\n                     UNION\n                     {?uri puro:subTypeOf <"+o+">}\n                     OPTIONAL {{?child puro:instanceOf ?uri} UNION {?child puro:subTypeOf ?uri}}\n                     OPTIONAL {?child a ?childType}\n                     OPTIONAL {{?child ?childRel ?uri} UNION {?child ?childRel ?uri}}\n                     OPTIONAL {?uri puro:linkedTo ?valuation. ?valuation a puro:BValuation}\n                     ?uri ?fatherTypeRelation <"+o+"> .\n                     ?uri rdfs:label ?label .\n                     ?uri a ?type . \n                     <"+o+"> a ?fatherType\n                     OPTIONAL {?uri puro:linkedTo ?connect. ?connect a puro:BRelation}\n                     OPTIONAL {?connectFrom puro:linkedTo ?uri. ?connectFrom a puro:BRelaion}\n                     BIND ( <"+o+">  AS ?father)\n                 }";r.sparqlQuery(i,function(e){if(!((e=this.deleteDuplicity(e,["connect","connectFrom","father","fatherType","fatherTypeRelation","child","childType","childRel","valuation"])).length>0))return n(t),t;for(var r in e)t.push(e[r]),this.findBTypeChild(e[r],t,n)}.bind(r))},this.getFullPath=function(){return new Promise((function(e){r.sparqlQuery("\n                 PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                 PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                 SELECT ?uri ?valuation ?label ?type ?connect ?child ?fatherType ?father ?fatherTypeRelation ?childType ?childRel WHERE \n                 {\n                     {?child puro:instanceOf ?uri}\n                     UNION\n                     {?child puro:subTypeOf ?uri}\n                     ?child a ?childType .\n                     ?child ?childRel ?uri . \n                     ?uri rdfs:label ?label .\n                     ?uri a puro:BType . \n                     ?uri a ?type\n                     OPTIONAL {?uri puro:linkedTo ?connect}\n                     OPTIONAL {?uri puro:linkedTo ?valuation. ?valuation a puro:BValuation}\n                     FILTER NOT EXISTS {?uri puro:linkedTo ?obj}\n                     FILTER NOT EXISTS {?uri puro:subTypeOf ?object}\n                 }",function(t){t.forEach((function(e){e.father=[],e.fatherType=[],e.fatherTypeRelation=[],e.childType=[e.childType.value],e.child=[e.child.value],e.childRel=[e.childRel.value],e.connect?e.connect=[e.connect.value]:e.connect=[],e.connectFrom=[]})),this.deleteDuplicity(t,["valuation"]),this.recursiveFindChild(0,t,[],(function(t){e(t)}))}.bind(r))}))},this.recursiveFindChild=function(e,t,n,o,i){if(e===t.length)return o(n),n;n.push(t[e]),"relation"===i?r.findBTypeRelation(t[e],n,function(r){e++,this.recursiveFindChild(e++,t,n,o,"relation")}.bind(r)):r.findBTypeChild(t[e],n,function(r){e++,this.recursiveFindChild(e++,t,n,o,i)}.bind(r))},this.sparqlQuery=function(e,t){var o=r.puroXML;o=(new XMLSerializer).serializeToString(o);var i,l=r.rdf.graph();r.rdf.parse(o,l,"http://lod2-dev.vse.cz/","application/rdf+xml"),r.rdf.serialize(void 0,l,"http://www.w3sds.org/1999/02/22-rdf-syntax-ns#type","text/turtle",(function(e,t){i=t})),n(687).create((function(n,r){r.load("text/turtle",i,(function(n,o){r.execute(e,(function(e,n){t(n)}))}))}))},this.getRelationBTypes=function(e){var t="\n                 PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                 PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                 SELECT  ?uri ?type ?label  WHERE \n                 {\n                     {<"+e+"> puro:instanceOf ?uri}\n                     UNION\n                     {<"+e+"> puro:subTypeOf ?uri}\n                     ?uri a ?type .\n                     ?uri rdfs:label ?label\n                 }";return new Promise((function(e){r.sparqlQuery(t,(function(t){r.recursiveFindChild(0,t,[],(function(t){e(t)}),"relation")}))}))},this.getRelations=function(){return new Promise((function(e){r.sparqlQuery("\n                PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                SELECT ?uri ?valuation ?from ?to ?toType ?fromType ?label ?type  WHERE \n                {\n                  ?uri a puro:BRelation . \n                  ?from puro:linkedTo ?uri .\n                  ?uri puro:linkedTo ?to .\n                  ?uri rdfs:label ?label . \n                  ?uri a ?type .\n                  OPTIONAL {?uri puro:linkedTo ?valuation. ?valuation a puro:BValuation}\n                  {?from a puro:BObject}\n                  UNION \n                  {?from a puro:BType}\n                  {?to a puro:BObject}\n                  UNION\n                  {?to a puro:BType} \n                  ?to a ?toType . \n                  ?from a ?fromType . \n                }",function(t){t=this.deleteDuplicity(t,["from","to","toType","fromType","valuation"]),console.log(t),e(t)}.bind(r))}))},this.findRelation=function(e){var t="\n                PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                SELECT ?uri ?label  WHERE \n                {\n                  <"+e+"> puro:linkedTo ?uri . \n                }";return new Promise((function(e){r.sparqlQuery(t,(function(t){e(t)}))}))},this.firstFind=Object(g.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n                PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                SELECT ?uri ?label ?child WHERE \n                {\n                    {?child puro:instanceOf ?uri}\n                     UNION\n                    {?child puro:subTypeOf ?uri}\n                    ?uri rdfs:label ?label. asfadf\n                    ?uri a puro:BType\n                    FILTER NOT EXISTS {?uri puro:linkedTo ?obj}\n                    FILTER NOT EXISTS {?uri puro:subTypeOf ?object}\n                }",e.abrupt("return",new Promise((function(e){r.sparqlQuery("\n                PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                SELECT ?uri ?label ?child WHERE \n                {\n                    {?child puro:instanceOf ?uri}\n                     UNION\n                    {?child puro:subTypeOf ?uri}\n                    ?uri rdfs:label ?label. asfadf\n                    ?uri a puro:BType\n                    FILTER NOT EXISTS {?uri puro:linkedTo ?obj}\n                    FILTER NOT EXISTS {?uri puro:subTypeOf ?object}\n                }",(function(t){e(t)}))})));case 2:case"end":return e.stop()}}),e)}))),this.deleteDuplicity=function(e,t){var n,r=[],o=!0,i=!1,l=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var u=a.value,c=!0,h=!1,f=void 0;try{for(var d,y=t[Symbol.iterator]();!(c=(d=y.next()).done);c=!0){var p=d.value;null===u[p]?u[p]=[]:u[p]=[u[p].value]}}catch(R){h=!0,f=R}finally{try{c||null==y.return||y.return()}finally{if(h)throw f}}}}catch(R){i=!0,l=R}finally{try{o||null==s.return||s.return()}finally{if(i)throw l}}for(var m=e.length-1;m>=0;m--)if(r.includes(e[m].uri.value)){var v=!0,T=!1,g=void 0;try{for(var b,E=function(){for(var t=b.value,r=function(r){if(n=e[m][t],e[r].uri.value===e[m].uri.value){if(!n.some((function(n){return e[r][t].includes(n)})))return e[r][t]=e[r][t].concat(n),"break";if(t.includes("Type")&&e[r][t.split("Type")[0]].length!==e[r][t].length)return e[r][t]=e[r][t].concat(n),"break"}},o=e.length-1;o>=0;o--){if("break"===r(o))break}},O=t[Symbol.iterator]();!(v=(b=O.next()).done);v=!0)E()}catch(R){T=!0,g=R}finally{try{v||null==O.return||O.return()}finally{if(T)throw g}}e.splice(m,1)}else r.push(e[m].uri.value);return e},this.rdf=n(904),y.a.ajax({type:"GET",url:"puroOutput.xml",async:!1,cache:!1,dataType:"xml",success:function(e){this.puroXML=e,t=e}}),this.puroXML=t},O=(n(853),function(){function e(){var t=this;Object(o.a)(this,e),this.addToOntoModel=function(e,n,r,o,i,l,a,s,u){var c,h,f,d=arguments.length>9&&void 0!==arguments[9]&&arguments[9];return""!==u&&void 0!==u&&!1===d?(c=!1,h=u,f="http://lod2-dev.vse.cz/data/ontomodels#"+u):(c=o,h=d?u:n,f=e),t.ontoModel.push({uri:f,label:h,ontoType:r,puroType:c,fromRelation:i,direction:l,from:a,to:s}),console.log(t.ontoModel),t.ontoModel},this.addRelation=function(e,n,r,o,i,l,a){return t.ontoModel.push({type:"relation",ontoType:e,from:n,to:r,uri:o,label:i,fromType:l,toType:a}),t.ontoModel},this.updateOntoModel=function(e,n,r){var o=!0,i=!1,l=void 0;try{for(var a,s=t.ontoModel[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var u=a.value;if(u.uri===e)return u[n]=r,t.ontoModel}}catch(c){i=!0,l=c}finally{try{o||null==s.return||s.return()}finally{if(i)throw l}}return!1},this.getOntoModel=function(){return t.ontoModel},this.getElementsRelation=function(e,n){var r=[],o=!0,i=!1,l=void 0;try{for(var a,s=t.ontoModel[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var u=a.value;"relation"===u.type&&u[n]===e?r.push(u):"connect"!==n||u.from!==e&&u.to!==e||r.push(u)}}catch(c){i=!0,l=c}finally{try{o||null==s.return||s.return()}finally{if(i)throw l}}return r},this.getElementOntoType=function(e){var n=t.getOntoElement(e);return!1!==n&&n.ontoType},this.getElementsByOntoType=function(e){var n=[],r=!0,o=!1,i=void 0;try{for(var l,a=t.ontoModel[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var s=l.value;e===s.ontoType&&n.push(s.uri)}}catch(u){o=!0,i=u}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n},this.getOntoElement=function(e){var n=!0,r=!1,o=void 0;try{for(var i,l=t.ontoModel[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var a=i.value;if(a.uri===e)return a}}catch(s){r=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return!1},this.changeOrigin=function(e,n){for(var r=0;r<t.ontoModel.length;r++)if(t.ontoModel[r].uri===e)return t.ontoModel[r].origin=n,!0;return!1},this.getLastElementUri=function(e){for(var n=t.ontoModel.length-1;n>=0;n--){if(t.ontoModel[n].fromRelation===e)return t.ontoModel[n].uri;if(void 0===e)return t.ontoModel[n].uri}return!1},this.getFatherOntoType=function(e){var n=[];if("father"in e){var r=!0,o=!1,i=void 0;try{for(var l,a=t.ontoModel[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var s=l.value;e.father.includes(s.uri)&&n.push(s.ontoType)}}catch(u){o=!0,i=u}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}}return 0===n.length&&(n=[""]),n},this.getRelationElements=function(e,n,r,o,i,l,a,s,u){var c,h,f=arguments.length>9&&void 0!==arguments[9]&&arguments[9];if(""!==e&&"dataType"!==a&&!1===f)return"superType"===a?(c=s+e,h=n.uri.value):"subType"===a?(h=s+e,c=n.uri.value):(c=n.father[0],h=s+e),[c,h];if(2===l&&0===i){for(var d,y=!1===r?s+e:r,p=t.ontoModel.length-1;p>=0;p--)if(console.log(t.ontoModel),t.ontoModel[p].fromRelation===o){d=t.ontoModel[p];break}return d.direction!==u&&d.fromRelation===o?(t.updateOntoModel(o,u,y),o):[d.uri,y]}if("elementSelection"===a){var m=t.getOntoElement(n.father[0]);return[m.uri,n.uri.value]}},this.checkDuplicity=function(e){var n=!0,r=!1,o=void 0;try{for(var i,l=t.ontoModel[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){if(i.value.label===e)return!1}}catch(a){r=!0,o=a}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return!0},this.getRelatedTypes=function(e,n,r){var o=t.getElementsRelation(e,n),i=[],l=[],a=!0,s=!1,u=void 0;try{for(var c,h=o[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;if(f.ontoType===r){var d=e===f.to?f.from:f.to;i.push(d),l.push(t.getElementOntoType(d))}else if(!1===r&&"Arrow"!==f.ontoType)if("Relator"===f.ontoType)l.push(f.ontoType);else{var y=e===f.to?f.from:f.to;i.push(y),l.push(t.getElementOntoType(y))}}}catch(p){s=!0,u=p}finally{try{a||null==h.return||h.return()}finally{if(s)throw u}}return l},this.ontoModel=[]}return Object(i.a)(e,[{key:"undo",value:function(e){this.ontoModel=JSON.parse(JSON.stringify(e))}}]),e}()),R=(n(92),function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"createButtons",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=(e=Array.isArray(e)?e:[e]).map((function(e){return{name:e}}));return Promise.resolve({buttons:i,title:t,type:n,elName:r,originalName:o})}},{key:"createQuestion",value:function(e,t){var n="";if("question"in e.rule){var r=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var s=l.value;if(s.type===e.rule.question){n=s.question;break}}}catch(c){o=!0,i=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}n=""===n?e.rule.question:n;var u=e.key in e.rule?e.rule[e.key][0]:e.rule.type[0];return n.replace("VAL",this.delUri(e.element)).replace("TYPE",u)}return"What is "+e.key+" of "+this.delUri(e.element)+"?"}},{key:"delUri",value:function(e){var t=[];if("string"===typeof e)return e.split("#")[1];if(Array.isArray(e)){var n=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var a=i.value;t.push(a.split("#")[1])}}catch(s){r=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}return""}}]),e}()),C=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(a.a)(t).call(this))).createGraph=function(t){e.ontoModel=t;var n="classDiagram\n",r=!0,o=!1,i=void 0;try{for(var l,a=e.ontoModel[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var s=l.value;if("relation"===s.type&&!1!==e.findLabel(s.to)&&!1!==e.findLabel(s.from))if("Arrow"===s.ontoType)n+=e.findLabel(s.to)+" --|> "+e.findLabel(s.from)+"\n";else if("Relator"===s.ontoType){if(s.from&&s.to){var u=s.fromType,c=s.toType;n+="class "+s.label+"{\n                                <<"+s.ontoType+">>\n                        }\n",n+=e.findLabel(s.from)+" "+(u?'"'+u[0]+'"':"")+" .. "+(c?'"'+u[1]+'"':"")+" "+s.label+" : <<Mediation>>\n",n+=s.label+" "+(c?'"'+c[0]+'"':"")+" .. "+(c?'"'+c[1]+'"':"")+" "+e.findLabel(s.to)+" : <<Mediation>>\n"}}else{var h=s.fromType,f=s.toType;n+=e.findLabel(s.from)+" "+(h?'"'+h+'"':"")+" .. "+(f?'"'+f+'"':"")+" "+e.findLabel(s.to)+("Row"===s.ontoType?"":" : <<"+s.ontoType+">>")+"\n"}else"relation"!==s.type&&(n+="class "+s.label+"{\n                    <<"+s.ontoType+">>\n                }\n")}}catch(d){o=!0,i=d}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return"classDiagram"!==n.trim()&&n},e.ontoModel=[],e}return Object(s.a)(t,e),Object(i.a)(t,[{key:"findLabel",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.ontoModel[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var l=o.value;if(l.uri===e)return l.label}}catch(a){n=!0,r=a}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return!1}}]),t}(R),N=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(a.a)(t).call(this))).ruleSelection=function(e,t,r,o,i,l){var a,s,u,c,h,f="";return i?u=i:(console.log(e),console.log(t),a=n.getSpecificRule(e,t),u=u=(s=n.getAdditionalRule(a,o)).length>0?s:a.offer),!1!==r?n.isElementInstace(r,l)?(h=!0,r.uri.value,c=n.rulesJson.questions[1].question.replace("VAL",r.label.value)):(h=!1,r.uri.value,c=n.rulesJson.questions[0].question.replace("VAL",r.label.value),f=r.label.value):(!1,c=e.questions[2].question),n.createButtons(u,c,"classSelection",h,f)},n.isElementInstace=function(e,t){var r=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var s=l.value;if(e.uri.value===s.uri.value){var u=!0,c=!1,h=void 0;try{for(var f,d=s.fatherTypeRelation[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var y=f.value;if("instanceOf"===n.delUri(y))return!0}}catch(p){c=!0,h=p}finally{try{u||null==d.return||d.return()}finally{if(c)throw h}}}}}catch(p){o=!0,i=p}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return!1},n.elementConsistencyRules=function(e,t){var r=n.rulesJson[e.ontoType],o=[],i={superType:t.getRelatedTypes(e.uri,"to","Arrow"),subType:t.getRelatedTypes(e.uri,"from","Arrow"),connect:t.getRelatedTypes(e.uri,"connect",!1)},l=!0,a=!1,s=void 0;try{for(var u,c=r[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var h=u.value;o=n.elementConsistencySelection(h,i.connect,"connect",e,o,r,i),o=n.elementConsistencySelection(h,i.superType,"superType",e,o,r,i),o=n.elementConsistencySelection(h,i.subType,"subType",e,o,r,i)}}catch(f){a=!0,s=f}finally{try{l||null==c.return||c.return()}finally{if(a)throw s}}return n.getSpecificRule(r,"connected"),o},n.elementConsistencySelection=function(e,t,r,o,i,l,a){if(e.key===r)if(!e.type.some((function(e){return t.includes(e)}))&&e.type.length>0)i.push({key:r,types:e.type,element:o.uri,rule:e});else{var s=n.getSpecificRule(l,r+"ed",!0);if(!1!==s){var u=!0,c=!1,h=void 0;try{for(var f,d=s[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var y=f.value;y.type.some((function(e){return t.includes(e)}))&&(i=n.elementConsAddSelection("superType",y,t,i,o,a),i=n.elementConsAddSelection("subType",y,t,i,o,a),i=n.elementConsAddSelection("connect",y,t,i,o,a))}}catch(p){c=!0,h=p}finally{try{u||null==d.return||d.return()}finally{if(c)throw h}}}}return i},n.getSpecificRule=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],o=!0,i=!1,l=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var u=a.value;if(u.key===t){if(!0!==n)return u;r.push(u)}}}catch(c){i=!0,l=c}finally{try{o||null==s.return||s.return()}finally{if(i)throw l}}return r.length>0&&e},n.getAdditionalRule=function(e,t){return t in e?e[t]:[]},n.commonRuleSelection=function(e,t,r){var o=[],i=[],l=e.connect.length>0,a=!0,s=!1,u=void 0;try{for(var c,h=e.childType[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;i.push(n.delUri(f))}}catch(S){s=!0,u=S}finally{try{a||null==h.return||h.return()}finally{if(s)throw u}}var d=!0,y=!1,p=void 0;try{for(var m,v=r[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var T=m.value;e.father.includes(T.uri)&&o.push(T.ontoType)}}catch(S){y=!0,p=S}finally{try{d||null==v.return||v.return()}finally{if(y)throw p}}var g=!0,b=!1,E=void 0;try{for(var O,R=n.rulesJson.commonRules[Symbol.iterator]();!(g=(O=R.next()).done);g=!0){var C=O.value;if((o.some((function(e){return C.fatherOnto.includes(e)}))||C.fatherOnto.includes("none"))&&(l===C.connection||0===C.connection)&&e.childType.some((function(e){return C.childPuro.includes(e)||C.childPuro.includes("none")}))){var N="Which type is "+e.label.value+"?";return n.createButtons(C.offer,N,"elementSelection",!1,e.label.value)}}}catch(S){b=!0,E=S}finally{try{g||null==R.return||R.return()}finally{if(b)throw E}}},n.rulesJson=e,n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"elementConsAddSelection",value:function(e,t,n,r,o,i){return e in t&&!t[e].some((function(t){return i[e].includes(t)}))&&t[e].length>0&&r.push({key:e,types:t[e],element:o.uri,rule:t}),r}}]),t}(R),S=function(){function e(){Object(o.a)(this,e),this.ontoModelHistory=[],this.propertiesHistory=[],this.inputVariables=[]}return Object(i.a)(e,[{key:"init",value:function(e){this.propertiesHistory.push(e),this.ontoModelHistory.push([])}},{key:"reset",value:function(){this.ontoModelHistory=[],this.propertiesHistory=[],this.inputVariables=[]}},{key:"saveRecords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;this.propertiesHistory.push(e),this.ontoModelHistory.push(t),this.inputVariables.push(n)}},{key:"undo",value:function(){return this.ontoModelHistory.pop(),this.propertiesHistory.pop(),this.inputVariables.pop(),console.log(this.propertiesHistory),console.log(this.inputVariables),console.log(this.ontoModelHistory),{ontoModel:this.ontoModelHistory[this.ontoModelHistory.length-2],properties:this.propertiesHistory[this.propertiesHistory.length-2],inputVariables:this.inputVariables[this.inputVariables.length-1]}}}]),e}(),x=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(a.a)(t).call(this))).rulesJson=JSON.parse(JSON.stringify(b)),e.rdfController=new E,e.ontoController=new O,e.imageController=new C,e.ruleController=new N(e.rulesJson),e.historyController=new S,e.rdfController.getFullPath().then((function(t){e.queryTree=t,console.log(t)})),e.rdfController.getRelations().then((function(t){e.relations=t,console.log(t)})),e.ontoUri="http://lod2-dev.vse.cz/data/ontomodels#",e.elSettings={},e.relationOrderIndex=0,e.relation={},e.relationIndex=0,e.relationType="",e.setIndexexToDefault(),e}return Object(s.a)(t,e),Object(i.a)(t,[{key:"getDefault",value:function(){var e=this.relations[this.relationOrderIndex];if(this.relation=e,this.ruleKey="from",this.relation.valuation.length>0)return this.nextElement("Relator",this.relation.uri.value,"BRelation","from");this.elementUri=e.uri.value;var t=this.rulesJson.bRelationRules[0].question.replace("VAL",e.label.value);return this.createButtons(this.rulesJson.bRelationRules[0].offer,t,this.delUri(e.type.value),!1,e.label.value)}},{key:"nextElement",value:function(){var e=Object(g.a)(T.a.mark((function e(t,n,r,o,i){var l,a,s,u,c,h,f,d,y,p;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==o&&!0===i&&this.changeElementsProperty(this.elementUri,"label",o),"BRelation"!==r){e.next=5;break}return e.abrupt("return",this.relationWasSelected(t,this.ruleKey));case 5:if(s=r,r.includes("ontoRelation-save-bRelation")&&(r.includes("relator")?"from"===r.replace("ontoRelation-save-bRelation-relator-","")?this.ontoController.updateOntoModel(this.relation.uri.value,"fromType",t):this.ontoController.updateOntoModel(this.relation.uri.value,"toType",t):(this.ontoController.updateOntoModel(this.relation.uri.value,"fromType",t[0]),this.ontoController.updateOntoModel(this.relation.uri.value,"toType",t[1])),t=this.elSettings.selectedType,r=this.elSettings.puroType,o=this.elSettings.elName,l=this.elSettings.relationEl,a=this.elSettings.additionalRule,i=this.elSettings.nameWasChange),r.includes("ontoRelation")||"dataType"===r){e.next=17;break}if(a=this.ruleController.getAdditionalRule(this.ruleController.getSpecificRule(this.rulesJson[this.relationType],this.ruleKey),t),l=this.ontoController.getRelationElements(o,this.getElementByUri(this.elementUri),this.elementUri,this.relation.uri.value,a.length,this.relationRuleIndex,r,this.ontoUri,this.ruleKey,i),this.elSettings={selectedType:t,nameWasChange:i,puroType:r,ruleKey:this.ruleKey,elName:o,relationEl:l,additionalRule:a,relType:""},l!==this.relation.uri.value){e.next=15;break}if(!1===(c=this.updateRelationTypes())){e.next=15;break}return e.abrupt("return",c);case 15:e.next=18;break;case 17:"dataType"===r?(l=[t,this.ontoUri+o],this.elSettings.relationEl=l,this.elSettings.relType="Row",this.ontoController.addToOntoModel(this.ontoUri+o,o,"Datatype","BValue",this.relation.uri,this.ruleKey)):(r.includes("ontoRelation-cardinality")?this.elSettings.relType=t:r.includes("ontoRelation-save")&&(u=t),t=this.elSettings.selectedType,r=this.elSettings.puroType,o=this.elSettings.elName,l=this.elSettings.relationEl,a=this.elSettings.additionalRule,i=this.elSettings.nameWasChange);case 18:if(!0===(h=this.getRelationRules(l,s,n,this.ruleKey,this.elSettings.selectedType,this.elSettings.relType,u))){e.next=21;break}return e.abrupt("return",Promise.resolve(h));case 21:if(null===this.valuationArr){e.next=28;break}if(!(this.valuationArr.length>0)){e.next=26;break}return e.abrupt("return",this.handleValuation);case 26:if(0!==this.valuationArr.length){e.next=28;break}return e.abrupt("return",this.nextTreeBranch(this.ruleKey));case 28:if(this.ontoController.addToOntoModel(this.elementUri,this.delUri(this.elementUri),t,this.delUri(this.selectedEl.type.value),this.relation.uri.value,this.ruleKey,void 0,void 0,o,i),!(a.length>0)){e.next=35;break}return this.selectedEl=this.getNextElement(),console.log(a),e.abrupt("return",this.ruleController.ruleSelection(void 0,this.ruleKey,this.selectedEl,void 0,a,this.queryTree));case 35:if(0===this.elementsWithoutType.length&&(this.elementsWithoutType=this.checkElementsInRelationTree(this.relationTree,this.ontoController.getOntoModel())),!(this.elementsWithoutType.length>0&&this.withoutTypeIndex<this.elementsWithoutType.length)){e.next=43;break}return f=this.getElementByUri(this.elementsWithoutType[this.withoutTypeIndex].uri.value),this.withoutTypeIndex++,this.elementUri=f.uri.value,e.abrupt("return",this.ruleController.commonRuleSelection(f,this.ruleKey,this.ontoController.getOntoModel()));case 43:if(""===this.ontoController.getOntoElement(this.relation.uri.value).from&&(d=this.ontoController.getLastElementUri(this.relation.uri.value),this.ontoController.updateOntoModel(this.relation.uri.value,this.ruleKey,d)),!((y=this.checkElementsConsistency(this.relation.uri.value,this.ruleKey)).length>0)){e.next=51;break}return p=this.createQuestion(y[0],this.rulesJson.questions),this.elementUri=y[0].element,e.abrupt("return",this.createButtons(y[0].types,p,y[0].key,!0));case 51:if(!(this.relationRuleIndex>1)){e.next=60;break}if(this.setIndexexToDefault(),this.relationOrderIndex++,this.relationOrderIndex!==this.relations.length){e.next=59;break}return alert("Transformation is comlete!!!"),e.abrupt("return",{buttons:[],title:"The End",type:"end"});case 59:return e.abrupt("return",this.getDefault());case 60:if(null!==this.valuationArr){e.next=64;break}if(this.valuationArr=this.getAllTreeValuations(this.ruleKey),!(this.valuationArr.length>0)){e.next=64;break}return e.abrupt("return",this.handleValuation());case 64:return e.abrupt("return",this.nextTreeBranch());case 65:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o,i){return e.apply(this,arguments)}}()},{key:"updateRelationTypes",value:function(){var e=this.ontoController.getOntoElement(this.relation.uri.value);if(void 0!==e.to&&void 0!==e.from){if("Relator"===e.ontoType&&void 0===e.fromType){var t=this.ruleController.getSpecificRule(this.rulesJson[e.ontoType],"cardinality");return this.createRelCardinalityBtn("ontoRelation-save-bRelation-relator-from",t,"from",e.from,e.uri)}if("Relator"===e.ontoType&&void 0===e.toType){var n=this.ruleController.getSpecificRule(this.rulesJson[e.ontoType],"cardinality");return this.createRelCardinalityBtn("ontoRelation-save-bRelation-relator-to",n,"to",e.uri,e.to)}if(void 0===e.toType&&void 0===e.fromType){var r=this.ruleController.getSpecificRule(this.rulesJson[e.ontoType],"cardinality");return this.createRelCardinalityBtn("ontoRelation-save-bRelation",r,"to",e.from,e.to)}}return!1}},{key:"handleValuation",value:function(){var e="Which Datatype represents "+this.delUri(this.valuationArr[0].valuation)+"?",t=this.createButtons(this.valuationArr[0].el,e,"dataType",!0);return this.elementUri=this.valuationArr[0].valuation,this.valuationArr.shift(),t}},{key:"nextTreeBranch",value:function(){var e,t=this;if(""===this.ontoController.getOntoElement(this.relation.uri.value).from){var n=this.ontoController.getLastElementUri(this.relation.uri.value);this.ontoController.updateOntoModel(this.relation.uri.value,this.ruleKey,n)}return this.relationRuleIndex++,this.relationTreeIndex===this.relationTreeArr.length?(this.ruleKey=0===this.relationRuleIndex?"from":"to",e=this.getRelatedElements(this.relation,this.ruleKey)):e=Promise.resolve(this.relationTreeArr),new Promise((function(n){e.then(function(e){this.valuationArr=null,n(this.handleRelatedElements(e,"nextElement",this.ruleKey))}.bind(t))}))}},{key:"getAllTreeValuations",value:function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,l=this.relationTree[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var a=i.value,s=this.getElementByUri(a.uri.value);if(s.valuation.length>0){var u=!0,c=!1,h=void 0;try{for(var f,d=s.valuation[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var y=f.value;t.push({el:s.uri.value,valuation:y})}}catch(E){c=!0,h=E}finally{try{u||null==d.return||d.return()}finally{if(c)throw h}}}}}catch(E){r=!0,o=E}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}if("from"===e){var p=!0,m=!1,v=void 0;try{for(var T,g=this.relation.valuation[Symbol.iterator]();!(p=(T=g.next()).done);p=!0){var b=T.value;t.push({el:this.relation.uri.value,valuation:b})}}catch(E){m=!0,v=E}finally{try{p||null==g.return||g.return()}finally{if(m)throw v}}}return t}},{key:"getGraphSvg",value:function(){var e=this.ontoController.getOntoModel();return this.imageController.createGraph(e)}},{key:"createRelCardinalityBtn",value:function(e,t,n,r,o,i,l){e+="dataType"===i?"-daType":"";var a=t.fromT.map((function(e){return{name:e,uri:l,origin:n,direction:"from"}})),s=t.fromT.map((function(e){return{name:e,uri:l,origin:n,direction:"to"}})),u=!1===this.getElementByUri(r)?this.delUri(r):this.getElementByUri(r).label.value,c=!1===this.getElementByUri(o)?this.delUri(o):this.getElementByUri(o).label.value;return{buttons:s.concat(a),title:"Select cardinality between elements",type:e,elName:[u,c]}}},{key:"getRelationRules",value:function(e,t,n,r,o,i,l){var a,s,u,c,h,f=t.replace("ontoRelation-",""),d=this.rulesJson.relationRules;if(!Array.isArray(e))return!0;if(a=e[0],s=e[1],u=!1===(u=this.ontoController.getElementOntoType(a))?o:u,c=!1===(c=this.ontoController.getElementOntoType(s))?o:c,h=this.findRule(d,["from",u,"to",c]),"cardinality"!==f&&"dataType"!==f&&1!==h.offer.length||f.includes("save")){if(f.includes("save"))return this.ontoController.addRelation(i,a,s,"uriDomyslet","nazev",l[0],l[1]),!0;var y=h.offer.map(function(e){return{name:e,uri:n,origin:r}}.bind(this));return this.elementUri=n,{buttons:y,title:"Which type of relation is between "+this.delUri(a)+" and "+this.delUri(s)+"?",type:"ontoRelation-cardinality"}}return"fromT"in h&&"toT"in h?(this.elSettings.selectedType=1===h.offer.length?h.offer[0]:this.elSettings.selectedType,this.createRelCardinalityBtn("ontoRelation-save",h,r,a,s,f,n)):(i=1===h.offer.length?h.offer[0]:i,this.ontoController.addRelation(i,a,s,"uriDomyslet","nazev","",""),!0)}},{key:"findRule",value:function(e,t){var n=!1,r=!0,o=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var s=l.value;n=!1;for(var u=0;u<t.length;u+=2){var c=!0,h=!1,f=void 0;try{for(var d,y=s[t[u]][Symbol.iterator]();!(c=(d=y.next()).done);c=!0){var p=d.value;if(t[u+1]===p||"*"===p){if(!0===n)return s;n=!0;break}}}catch(m){h=!0,f=m}finally{try{c||null==y.return||y.return()}finally{if(h)throw f}}}}}catch(m){o=!0,i=m}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return!1}},{key:"relationWasSelected",value:function(e){var t=this;this.ruleKey="from",this.relation=this.relations[this.relationOrderIndex],this.relationType=e;var n,r=this.rulesJson[e];return n=this.relationTreeArr.length===this.relationTreeIndex?this.getRelatedElements(this.relation,this.ruleKey):Promise.resolve(this.relationTreeArr),this.relationRuleIndex++,this.ontoController.addRelation(e,"","",this.relation.uri.value,this.relation.label.value),new Promise((function(e){n.then((function(n){e(t.handleRelatedElements(n,"relationWasSelected",t.ruleKey,r))}))}))}},{key:"handleRelatedElements",value:function(e,t,n,r){if(this.relationTreeArr=e,this.relationTree=e[this.relationTreeIndex],this.relationTreeIndex++,this.relationIndex=this.relationTree.length-1,"relationWasSelected"===t){this.selectedEl=this.getNextElement();var o=this.getElementByUri(this.selectedEl.uri.value);console.log(this.queryTree);var i=[];if(o.father.length>0){var l=this.ontoController.getElementOntoType(o.father[0]);!1!==l&&(console.log(o),i=this.ruleController.getAdditionalRule(this.ruleController.getSpecificRule(r,n),l))}return 0===i.length?(this.elementUri=this.selectedEl.uri.value,this.ruleController.ruleSelection(r,n,o,void 0,void 0,this.queryTree)):(this.elementUri=this.selectedEl.uri.value,this.ruleController.ruleSelection(void 0,n,o,void 0,i,this.queryTree))}var a=this.rulesJson[this.relationType];return this.selectedEl=this.relationTree[this.relationIndex],this.relationIndex--,this.elementUri=this.selectedEl.uri.value,this.ruleController.ruleSelection(a,n,this.selectedEl,void 0,void 0,this.queryTree)}},{key:"checkElementsInRelationTree",value:function(e,t){var n=[],r=!0,o=!0,i=!1,l=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var u=a.value;r=!0;var c=!0,h=!1,f=void 0;try{for(var d,y=t[Symbol.iterator]();!(c=(d=y.next()).done);c=!0){var p=d.value;u.uri.value===p.uri&&(r=!1)}}catch(m){h=!0,f=m}finally{try{c||null==y.return||y.return()}finally{if(h)throw f}}!0!==r||this.isElementUseless(u)||this.isElementInstace(u)||n.push(u)}}catch(m){i=!0,l=m}finally{try{o||null==s.return||s.return()}finally{if(i)throw l}}return n}},{key:"getRelatedElements",value:function(e,t){var n=this;this.elementConsitencyTree=[],this.elementConsistencyIndex=0,this.relationTreeIndex=0,this.relationTreeArr=[];var r=[],o=!0,i=!1,l=void 0;try{for(var a,s=e[t][Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var u=a.value;r.push(this.rdfController.getRelationBTypes(u))}}catch(c){i=!0,l=c}finally{try{o||null==s.return||s.return()}finally{if(i)throw l}}return Promise.all(r).then((function(r){for(var o=0;o<r.length;o++)r[o].length>0?(r[o].unshift(n.getElementByUri(e[t][o])),r[o]=r[o].map((function(e){return n.getElementByUri(e.uri.value)}))):r[o]=[n.getElementByUri(e[t][o])];return console.log(r),r}))}},{key:"l",value:function(e){console.log("CECKKKKKKKKKKKKKKKKKKKKK"),console.log(e)}},{key:"getNextElement",value:function(){var e,t=this.ontoController.getOntoModel();this.isElementUseless(this.relationTree[this.relationIndex])&&this.relationIndex--;for(var n=0;n<t.length;n++)t[n].uri===this.relationTree[this.relationIndex].uri.value&&(this.relationIndex--,n=0);return e=this.relationTree[this.relationIndex],this.relationIndex--,e}},{key:"isElementInstace",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.queryTree[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var l=o.value;if(e.uri.value===l.uri.value){var a=!0,s=!1,u=void 0;try{for(var c,h=l.fatherTypeRelation[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;if("instanceOf"===this.delUri(f))return!0}}catch(d){s=!0,u=d}finally{try{a||null==h.return||h.return()}finally{if(s)throw u}}}}}catch(d){n=!0,r=d}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return!1}},{key:"checkElementsConsistency",value:function(e,t){var n=this.ontoController.getOntoModel();if(0===this.elementConsitencyTree.length){var r=!0,o=!1,i=void 0;try{for(var l,a=n[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var s=l.value;s.fromRelation===e&&s.direction===t&&this.elementConsitencyTree.push(s)}}catch(c){o=!0,i=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}if(0===this.elementConsitencyTree.length)return this.elementConsitencyTree}this.ontoController.getOntoElement(this.relation.uri.value);for(var u=this.ruleController.elementConsistencyRules(this.elementConsitencyTree[this.elementConsistencyIndex],this.ontoController);this.elementConsitencyTree.length<this.elementConsistencyIndex&&0===u.length;)this.elementConsistencyIndex++,u=this.ruleController.elementConsistencyRules(this.elementConsitencyTree[this.elementConsistencyIndex],this.ontoController);return u}},{key:"isElementUseless",value:function(e){return"child"in e&&0===e.child.length&&0===e.connect.length&&0===e.connectFrom.length}},{key:"getElementByUri",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.queryTree[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var l=o.value;if(l.uri.value===e)return l}}catch(a){n=!0,r=a}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return!1}},{key:"changeElementsProperty",value:function(e,t,n){for(var r=0;r<this.queryTree.length;r++)if(this.queryTree[r].uri.value===e)return this.queryTree[r][t].value=n,!0;return!1}},{key:"checkDuplicity",value:function(e){return this.ontoController.checkDuplicity(e)}},{key:"getConnectedElements",value:function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var s=l.value,u=this.ontoController.getElementOntoType(s);if(!1===u||e[this.ruleIndex].connect.includes(u)){var c=!1!==u?this.delUri(s)+" ["+u+"]":this.delUri(s);n.push({name:c,uri:s})}}}catch(h){o=!0,i=h}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}},{key:"setIndexexToDefault",value:function(){this.valuationArr=null,this.relationRuleIndex=0,this.relationTree={},this.relationTreeIndex=0,this.relationTreeArr=[],this.elementsWithoutType=[],this.withoutTypeIndex=0,this.elementConsistencyIndex=0,this.elementConsitencyTree=[],this.elementUri="",this.ruleKey="",this.type="",this.selectedEl={},this.elSettings={}}},{key:"saveHistory",value:function(e,t){if(0===this.historyController.propertiesHistory.length){var n={};for(var r in e)"queryTree"===e[r]?n[r]=this.queryTree:"string"===typeof e[r]?n[r]="":"number"===typeof e[r]?n[r]=0:Array.isArray(e[r])?n[r]=[]:"object"===e[r]&&(n[r]={});this.historyController.init(n)}this.historyController.saveRecords(e,JSON.parse(JSON.stringify(this.ontoController.getOntoModel())),t)}},{key:"undo",value:function(){var e=this.historyController.undo();if(void 0===e.ontoModel&&void 0===e.properties)return this.historyController.reset(),this.ontoController.undo([]),this.setIndexexToDefault(),this.elSettings={},this.relationOrderIndex=0,this.relation={},this.relationIndex=0,this.relationType="",!1;for(var t in this.ontoController.undo(e.ontoModel),e.properties)"object"===typeof e.properties[t]?"queryTree"===t&&0===e.properties[t].length||(this[t]=JSON.parse(JSON.stringify(e.properties[t]))):this[t]=e.properties[t];return{inputVariables:e.inputVariables}}}]),t}(R),k=n(216),w=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(a.a)(t).call(this,e))).createGraph=function(e){n.setState({svg:e})},n.state={svg:""},n.eventController=new x,m.a.initialize({startOnLoad:!1,themeCSS:"#extensionEnd { fill: white; }"}),n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"form-group col-md-6",id:"graph"},c.a.createElement("label",{htmlFor:"exampleFormControlTextarea1"},"Puro model"),c.a.createElement("div",{className:"form-control  transformWindow embed-responsive",id:"exampleFormControlTextarea1"},c.a.createElement("img",{src:n(903),className:"img-fluid",alt:"puro-model"}))),c.a.createElement("div",{className:"form-group col-md-6",id:"graph"},c.a.createElement(k.b,{enablePadding:!1},(function(t){t.zoomIn,t.zoomOut;var n=t.resetTransform;Object(r.a)(t,["zoomIn","zoomOut","resetTransform"]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"tools"},c.a.createElement("label",{htmlFor:"exampleFormControlTextarea1"},"Onto model"),c.a.createElement("button",{className:"toolBtn btn-sm btn-light",onClick:n},"Unzoom")),c.a.createElement(k.a,null,c.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.state.svg},className:"form-control transformWindow",id:"exampleFormControlTextarea1"})))}))),c.a.createElement(I,{graphCreation:this.createGraph})))}}]),t}(c.a.Component),I=(c.a.Component,c.a.Component,function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(a.a)(t).call(this,e))).handleChange=function(e){n.setState({elName:e.target.value})},n.handleSubmit=function(e){void 0!==e&&e.preventDefault(),window.addEventListener("unhandledrejection",(function(e){alert("Rule is not defined!\nOnly the first answer is correct! \nRules are not complete yet!\nPage will be reloaded!"),window.location.reload()})),n.eventController.getDefault().then((function(e){n.setState({undoActive:!1,svgUrl:"",buttons:e.buttons,title:e.title,originalName:e.originalName,type:e.type,startTransform:!1})}))},n.undoClick=function(){},n.handleClick=function(e,t,r){var o=n.state.elName,i=!1,l=!0,a=n.state.nameWasChange;if(""===o&&!0===n.state.changeName&&"Undo"!==r)alert("Plese write name of the element!");else if(""!==o&&o.match(/^[A-z]*[<>,.*|]+[A-z]*$/))alert("Please change the name. It contains forbidden characters!");else{if("Undo"===r){var s=n.eventController.undo();if(!1===s)n.handleSubmit(),l=!1;else{var u=s.inputVariables;e=u[0],t=u[1],r=u[2],o=u[3],a=u[4],i=!0}}""===(o=o.replace(/\s/g,"_"))||!0!==n.state.changeName||n.eventController.checkDuplicity(o)?!0===l&&n.eventController.nextElement(e,t,r,o,a).then((function(l){if(!1===i){var a=Object.getOwnPropertyNames(n.eventController),s={},u=!0,c=!1,h=void 0;try{for(var f,d=a[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var y=f.value;y.includes("Controller")||"rulesJson"===y||"relations"===y||"function"!==typeof y&&(s[y]=n.assignProp(n.eventController[y]))}}catch(m){c=!0,h=m}finally{try{u||null==d.return||d.return()}finally{if(c)throw h}}n.eventController.saveHistory(s,[e,t,r,o,n.state.nameWasChange])}var p=n.eventController.getGraphSvg();n.setState({buttons:l.buttons,type:l.type,title:l.title,undoActive:!0,elName:"",changeName:l.elName,originalName:l.originalName,nameWasChange:!1}),!1!==p&&n.createGraph(p),n.state.type.includes("end")&&n.handleDownloadImage()})):alert("Element already exists! Please choose different name.")}},n.assignProp=function(e){return Array.isArray(e)||"object"===typeof e?JSON.parse(JSON.stringify(e)):e},n.createGraph=function(e){m.a.render("id1",e,(function(e){n.setState({svg:e}),n.props.graphCreation(e)}))},n.handleChangeName=function(){n.setState({changeName:!n.state.changeName}),!0===n.state.changeName?(n.setState({elName:n.state.originalName,nameWasChange:!1}),y()(".changeAlert").fadeTo(1400,500).slideUp(500,(function(){y()(".changeAlert").alert("fade")}))):n.setState({elName:"",nameWasChange:!0})},n.handleDownloadImage=function(){var e=new Blob([n.state.svg],{type:"image/svg+xml;charset=utf-8"}),t=URL.createObjectURL(e);n.setState({svgUrl:t})},n.state={startTransform:!0,originalName:"",nameWasChange:!1,buttons:[],changeName:!1,elName:"",type:"",undoActive:!1,svg:""},n.eventController=new x,n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"container-fluid text-center questionPart"},c.a.createElement("button",{type:"Submint",className:this.state.startTransform?"btn btn-primary":"d-none","data-toggle":"modal","data-target":"#exampleModal",onClick:this.handleSubmit},"Start transformation"),c.a.createElement("div",{className:this.state.startTransform?"d-none":""},c.a.createElement("h3",null,this.state.title),c.a.createElement("div",{className:"optionButtons d-none d-md-block"},c.a.createElement("div",{className:"btn-group-vertical text-right"},c.a.createElement("button",{type:"button",className:"btn btn-primary btnModal",onClick:this.handleChangeName,disabled:""===this.state.originalName||this.state.type.includes("ontoRelation")||this.state.type.includes("end")},!0===this.state.changeName&&""!==this.state.originalName?"Set original name":"Change name"),c.a.createElement("button",{type:"button",className:"btn btn-primary btnModal",onClick:function(){return e.handleClick(void 0,void 0,"Undo")},disabled:!this.state.undoActive},"Undo"),c.a.createElement("button",{type:"button",className:"btn btn-secondary btnModal","data-dismiss":"modal",onClick:function(e){window.confirm("Are you sure you want to cancel the transformation?")&&window.location.reload()}},"Cancel"))),c.a.createElement("div",{className:!0===this.state.changeName?"col-md-6 mx-auto":"d-none"},c.a.createElement("div",{className:"input-group inputName"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text",id:""},"Name of the element:")),c.a.createElement("input",{placeholder:""===this.state.originalName?"Write name of the element!":this.state.orginalName,type:"text",className:"form-control",onChange:this.handleChange,value:this.state.elName})),c.a.createElement("h5",{className:this.state.buttons.lenght>1?"text-center inputName":"d-none"},"Select element's class:")),c.a.createElement("div",{className:"divButtons text-center"},c.a.createElement(U,{buttons:this.state.buttons,svgUrl:this.state.svgUrl,onClick:this.handleClick,type:this.state.type,elNames:this.state.changeName,originalName:this.state.originalName})),c.a.createElement("div",{class:"alert alert-success col-md-6 mx-auto changeAlert",role:"alert"},"Original name of the element was set!")))}}]),t}(c.a.Component)),U=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(a.a)(t).call(this,e))).refs=c.a.createRef(),n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.props.type.includes("ontoRelation-save")?c.a.createElement("div",{className:"row col-md-5 mx-auto"},c.a.createElement("label",{className:"label label-default col-md-6 mx-auto form-control"},this.props.elNames[0]),c.a.createElement("label",{className:"label label-default col-md-6 mx-auto form-control"},this.props.elNames[1]),c.a.createElement("select",{ref:"relFrom",className:"col-md-6 mx-auto form-control cardinalitySelect"},this.props.buttons.filter((function(e){return"from"===e.direction})).map((function(e){return c.a.createElement("option",{value:e.name},e.name)}))),c.a.createElement("select",{ref:"relTo",className:"col-md-6 mx-auto form-control cardinalitySelect"},this.props.buttons.filter((function(e){return"to"===e.direction})).map((function(e){return c.a.createElement("option",{value:e.name},e.name)}))),c.a.createElement("button",{className:"btn btn-success mx-auto questionPart",onClick:function(){return e.props.onClick([e.refs.relFrom.value,e.refs.relTo.value],null,e.props.type)}},"Next")):this.props.type.includes("end")?c.a.createElement("div",{className:"col-md-5 mx-auto"},c.a.createElement("a",{className:"btn btn-success",href:this.props.svgUrl,download:"ontoUml-graph.svg"},"Download Onto-UML graph")):c.a.createElement("div",{className:"row col-md-6 mx-auto"},this.props.buttons.map((function(t){return c.a.createElement("div",{className:"col-md-4 mx-auto"},c.a.createElement("button",{key:e.props.uri,type:"button",className:"btn btn-success btnModal",onClick:function(){return e.props.onClick(t.name,t.uri,e.props.type,t.origin)}},e.props.type.includes("dataType")||""===e.props.originalName&&1===e.props.buttons.length?"Next":t.name))})))}}]),t}(c.a.Component),M=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return[c.a.createElement(w,null)]}}]),t}(c.a.Component);f.a.render(c.a.createElement(M,null),document.getElementById("root"))}},[[404,1,2]]]);
//# sourceMappingURL=main.de6674f9.chunk.js.map