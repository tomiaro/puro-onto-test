(this["webpackJsonppuro-onto"]=this["webpackJsonppuro-onto"]||[]).push([[0],{415:function(e){e.exports=JSON.parse('{"classes":["Kind","Subkind","Phase","Role","Collective","Quantity","Relator","Category","RoleMixin","Mixin","Mode","Quality","None"],"bRelationRules":[{"offer":["Characterization","Relator"],"question":"Which type is relation VAL?"}],"relationRules":[{"from":["Mode","Kind"],"to":["Subkind","Role"],"offer":["Arrow"]},{"from":["*"],"to":["Datatype"],"offer":["Row"],"fromT":["*","1","0"],"toT":["*","1","0"]}],"commonRules":[{"fatherPuro":"BType","childPuro":"instance","fatherOnto":"Kind","hasRelation":1,"offer":[1,10]},{"fatherPuro":"","fatherOnto":"","childPuro":"BType","hasRelation":0,"offer":[0,1,2,3,4,5,6,7,10]},{"fatherPuro":"","fatherOnto":"","childPuro":"BType","hasRelation":0,"offer":[0,1,2,3,4,5,6,7,10]}],"questions":[{"type":"BType","question":"Which type is a VAL?"},{"type":"instance","question":"Which ontoUML elment represents instance VAL?"},{"type":"none","question":"Which element plays TYPE to REL?"},{"type":"singleUniv","question":"What is the TyPe of VAL?"}],"Relator":[{"key":"from","offer":["Kind","Collective","Role"],"Kind":["Role","Subkind"]},{"key":"to","offer":["Role","Kind","Collective"]},{"key":"cardinality","fromT":[1,"1..*"],"toT":[1,"1..*"]}],"Characterization":[{"key":"from","offer":["Kind","Subkind","Role"]},{"key":"to","offer":["Mode","Quality"]},{"key":"cardinality","fromT":[1,"*"],"toT":[1,"*"]}],"Mode":[{"key":"superType","type":[]},{"key":"subType","type":["Subkind","Kind"]}],"Role":[{"key":"superType","type":[]},{"key":"subType","type":[]},{"key":"connect","type":["Relator"]},{"key":"connected","type":["Relator"],"superType":["Kind"],"question":"singleUniv"}],"Kind":[{"key":"superType","type":[]},{"key":"subType","type":[]}],"Subkind":[{"key":"superType","type":[]},{"key":"subType","type":[]}]}')},420:function(e,t,n){e.exports=n(969)},427:function(e,t,n){},432:function(e,t){},434:function(e,t){},467:function(e,t){},468:function(e,t){},696:function(e,t,n){var r={"./locale":319,"./locale.js":319};function o(e){var t=l(e);return n(t)}function l(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=l,e.exports=o,o.id=696},738:function(e,t){},759:function(e,t){},761:function(e,t){},771:function(e,t,n){var r={"./N3Lexer":194,"./N3Lexer.js":194,"./N3Parser":195,"./N3Parser.js":195,"./N3Store":347,"./N3Store.js":347,"./N3StreamParser":348,"./N3StreamParser.js":348,"./N3StreamWriter":349,"./N3StreamWriter.js":349,"./N3Util":196,"./N3Util.js":196,"./N3Writer":197,"./N3Writer.js":197};function o(e){var t=l(e);return n(t)}function l(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=l,e.exports=o,o.id=771},776:function(e,t){},793:function(e,t){},799:function(e,t){},812:function(e,t){},813:function(e,t){},823:function(e,t){},825:function(e,t){},898:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=898},969:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(2),l=n(6),i=n(10),a=n(94),u=n(11),s=n(4),c=n.n(s),f=n(414),d=n.n(f),p=(n(425),n(426),n(427),n(95)),y=n.n(p),h=n(218),m=n.n(h),v=(n(702),n(714),n(17)),T=n.n(v),b=n(96),g=n(415),E=function e(){var t,o=this;Object(r.a)(this,e),this.getRelatorBtype=function(e,t){var n="\n            PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            SELECT ?element ?valuation ?elementLabel ?type ?father ?fatherLabel ?elementType ?fatherType WHERE \n            {\n                {<"+e+"> puro:linkedTo ?element . <"+t+"> puro:linkedTo <"+e+">} \n                UNION\n                {?element puro:linkedTo <"+e+"> . <"+e+"> puro:linkedTo <"+t+">}    \n                {?element a puro:BObject}\n                UNION\n                {?element a puro:BType}\n                ?element rdfs:label ?elementLabel .\n                ?element a ?elementType .  \n                OPTIONAL {?element puro:instanceOf ?father}\n                OPTIONAL {?father rdfs:label ?fatherLabel}\n                OPTIONAL {?father a ?fatherType}\n                OPTIONAL {?uri puro:linkedTo ?valuation. ?valuation a puro:BValuation}\n               \n               \n            }";return new Promise((function(t){o.sparqlQuery(n,(function(n){(n=this.deleteDuplicity(n,["valuation"])).relationName=e,t(n)}))}))},this.findBTypeRelation=function(e,t,n){var r=e.uri.value,l="\n             PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n             PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n             SELECT ?uri ?label ?father ?fatherType ?type ?fatherTypeRelation ?connect ?connectFrom ?child ?childType ?childRel WHERE \n             {\n                 {<"+r+"> puro:instanceOf ?uri }\n                 UNION\n                 {<"+r+"> puro:subTypeOf  ?uri }\n                 ?uri a ?type . \n                 ?uri rdfs:label ?label . \n                \n             }";o.sparqlQuery(l,function(e){if(!((e=this.deleteDuplicity(e,["connect","connectFrom","father","fatherType","fatherTypeRelation","child","childType","childRel"])).length>0))return n(t),t;for(var r in e)console.log(e),t.push(e[r]),this.findBTypeRelation(e[r],t,n)}.bind(o))},this.findBTypeChild=function(e,t,n){var r=e.uri.value,l="\n                 PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                 PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                 SELECT ?uri ?valuation ?valuationLabel ?label ?father ?fatherType ?type ?fatherTypeRelation ?connect ?connectFrom ?child ?childType ?childRel WHERE \n                 {\n                     {?uri puro:instanceOf <"+r+">}\n                     UNION\n                     {?uri puro:subTypeOf <"+r+">}\n                     OPTIONAL {{?child puro:instanceOf ?uri} UNION {?child puro:subTypeOf ?uri}}\n                     OPTIONAL {?child a ?childType}\n                     OPTIONAL {{?child ?childRel ?uri} UNION {?child ?childRel ?uri}}\n                     OPTIONAL {?uri puro:linkedTo ?valuation. ?valuation a puro:BValuation}\n                     ?uri ?fatherTypeRelation <"+r+"> .\n                     ?uri rdfs:label ?label .\n                     ?uri a ?type . \n                     <"+r+"> a ?fatherType\n                     OPTIONAL {?uri puro:linkedTo ?connect. ?connect a puro:BRelation}\n                     OPTIONAL {?connectFrom puro:linkedTo ?uri. ?connectFrom a puro:BRelaion}\n                     BIND ( <"+r+">  AS ?father)\n                 }";o.sparqlQuery(l,function(e){if(!((e=this.deleteDuplicity(e,["connect","connectFrom","father","fatherType","fatherTypeRelation","child","childType","childRel","valuation"])).length>0))return n(t),t;for(var r in e)t.push(e[r]),this.findBTypeChild(e[r],t,n)}.bind(o))},this.getFullPath=function(){return new Promise((function(e){o.sparqlQuery("\n                 PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                 PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                 SELECT ?uri ?valuation ?label ?type ?connect ?child ?fatherType ?father ?fatherTypeRelation ?childType ?childRel WHERE \n                 {\n                     {?child puro:instanceOf ?uri}\n                     UNION\n                     {?child puro:subTypeOf ?uri}\n                     ?child a ?childType .\n                     ?child ?childRel ?uri . \n                     ?uri rdfs:label ?label .\n                     ?uri a puro:BType . \n                     ?uri a ?type\n                     OPTIONAL {?uri puro:linkedTo ?connect}\n                     OPTIONAL {?uri puro:linkedTo ?valuation. ?valuation a puro:BValuation}\n                     FILTER NOT EXISTS {?uri puro:linkedTo ?obj}\n                     FILTER NOT EXISTS {?uri puro:subTypeOf ?object}\n                 }",function(t){t.forEach((function(e){e.father=[],e.fatherType=[],e.fatherTypeRelation=[],e.childType=[e.childType.value],e.child=[e.child.value],e.childRel=[e.childRel.value],e.connect?e.connect=[e.connect.value]:e.connect=[],e.connectFrom=[]})),this.deleteDuplicity(t,["valuation"]),this.recursiveFindChild(0,t,[],(function(t){e(t)}))}.bind(o))}))},this.recursiveFindChild=function(e,t,n,r,l){if(e===t.length)return r(n),n;n.push(t[e]),"relation"===l?o.findBTypeRelation(t[e],n,function(o){e++,this.recursiveFindChild(e++,t,n,r,"relation")}.bind(o)):o.findBTypeChild(t[e],n,function(o){e++,this.recursiveFindChild(e++,t,n,r,l)}.bind(o))},this.sparqlQuery=function(e,t){var r=o.puroXML;r=(new XMLSerializer).serializeToString(r);var l,i=o.rdf.graph();o.rdf.parse(r,i,"http://lod2-dev.vse.cz/","application/rdf+xml"),o.rdf.serialize(void 0,i,"http://www.w3sds.org/1999/02/22-rdf-syntax-ns#type","text/turtle",(function(e,t){l=t})),n(752).create((function(n,r){r.load("text/turtle",l,(function(n,o){r.execute(e,(function(e,n){t(n)}))}))}))},this.getRelationBTypes=function(e){var t="\n                 PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                 PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                 SELECT  ?uri ?type ?label  WHERE \n                 {\n                     {<"+e+"> puro:instanceOf ?uri}\n                     UNION\n                     {<"+e+"> puro:subTypeOf ?uri}\n                     ?uri a ?type .\n                     ?uri rdfs:label ?label\n                 }";return new Promise((function(e){o.sparqlQuery(t,function(t){this.recursiveFindChild(0,t,[],(function(t){e(t)}),"relation")}.bind(o))}))},this.getRelations=function(){return new Promise((function(e){o.sparqlQuery("\n                PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                SELECT ?uri ?valuation ?from ?to ?toType ?fromType ?label ?type  WHERE \n                {\n                  ?uri a puro:BRelation . \n                  ?from puro:linkedTo ?uri .\n                  ?uri puro:linkedTo ?to .\n                  ?uri rdfs:label ?label . \n                  ?uri a ?type .\n                  OPTIONAL {?uri puro:linkedTo ?valuation. ?valuation a puro:BValuation}\n                  {?from a puro:BObject}\n                  UNION \n                  {?from a puro:BType}\n                  {?to a puro:BObject}\n                  UNION\n                  {?to a puro:BType} \n                  ?to a ?toType . \n                  ?from a ?fromType . \n                }",function(t){t=this.deleteDuplicity(t,["from","to","toType","fromType","valuation"]),console.log(t),e(t)}.bind(o))}))},this.findRelation=function(e){var t="\n                PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                SELECT ?uri ?label  WHERE \n                {\n                  <"+e+"> puro:linkedTo ?uri . \n                }";return new Promise((function(e){o.sparqlQuery(t,(function(t){e(t)}))}))},this.firstFind=Object(b.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n                PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                SELECT ?uri ?label ?child WHERE \n                {\n                    {?child puro:instanceOf ?uri}\n                     UNION\n                    {?child puro:subTypeOf ?uri}\n                    ?uri rdfs:label ?label. asfadf\n                    ?uri a puro:BType\n                    FILTER NOT EXISTS {?uri puro:linkedTo ?obj}\n                    FILTER NOT EXISTS {?uri puro:subTypeOf ?object}\n                }",e.abrupt("return",new Promise((function(e){o.sparqlQuery("\n                PREFIX puro: <http://lod2-dev.vse.cz/ontology/puro#>\n                PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n                SELECT ?uri ?label ?child WHERE \n                {\n                    {?child puro:instanceOf ?uri}\n                     UNION\n                    {?child puro:subTypeOf ?uri}\n                    ?uri rdfs:label ?label. asfadf\n                    ?uri a puro:BType\n                    FILTER NOT EXISTS {?uri puro:linkedTo ?obj}\n                    FILTER NOT EXISTS {?uri puro:subTypeOf ?object}\n                }",(function(t){e(t)}))})));case 2:case"end":return e.stop()}}),e)}))),this.deleteDuplicity=function(e,t){var n,r=[],o=!0,l=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var s=a.value,c=!0,f=!1,d=void 0;try{for(var p,y=t[Symbol.iterator]();!(c=(p=y.next()).done);c=!0){var h=p.value;null===s[h]?s[h]=[]:s[h]=[s[h].value]}}catch(O){f=!0,d=O}finally{try{c||null==y.return||y.return()}finally{if(f)throw d}}}}catch(O){l=!0,i=O}finally{try{o||null==u.return||u.return()}finally{if(l)throw i}}for(var m=e.length-1;m>=0;m--)if(r.includes(e[m].uri.value)){var v=!0,T=!1,b=void 0;try{for(var g,E=function(){for(var t=g.value,r=function(r){if(n=e[m][t],e[r].uri.value===e[m].uri.value){if(!n.some((function(n){return e[r][t].includes(n)})))return e[r][t]=e[r][t].concat(n),"break";if(t.includes("Type")&&e[r][t.split("Type")[0]].length!==e[r][t].length)return e[r][t]=e[r][t].concat(n),"break"}},o=e.length-1;o>=0;o--){if("break"===r(o))break}},R=t[Symbol.iterator]();!(v=(g=R.next()).done);v=!0)E()}catch(O){T=!0,b=O}finally{try{v||null==R.return||R.return()}finally{if(T)throw b}}e.splice(m,1)}else r.push(e[m].uri.value);return e},this.rdf=n(968),y.a.ajax({type:"GET",url:"http://localhost:3000/puroOutput.xml",async:!1,cache:!1,dataType:"xml",success:function(e){this.puroXML=e,t=e}}),this.puroXML=t},R=(n(918),function e(){var t=this;Object(r.a)(this,e),this.addToOntoModel=function(e,n,r,o,l,i,a,u,s){var c,f,d;return""!==s&&void 0!==s?(c=!1,f=s,d="http://lod2-dev.vse.cz/data/ontomodels#"+s):(c=o,f=n,d=e),t.ontoModel.push({uri:d,label:f,ontoType:r,puroType:c,fromRelation:l,direction:i,from:a,to:u}),console.log(t.ontoModel),!0},this.addRelation=function(e,n,r,o,l,i,a){return t.ontoModel.push({type:"relation",ontoType:e,from:n,to:r,uri:o,label:l,fromType:i,toType:a}),!0},this.updateOntoModel=function(e,n,r){var o=!0,l=!1,i=void 0;try{for(var a,u=t.ontoModel[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var s=a.value;if(s.uri===e)return s[n]=r,!0}}catch(c){l=!0,i=c}finally{try{o||null==u.return||u.return()}finally{if(l)throw i}}return!1},this.getOntoModel=function(){return t.ontoModel},this.getElementsRelation=function(e,n){var r=[],o=!0,l=!1,i=void 0;try{for(var a,u=t.ontoModel[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var s=a.value;"relation"===s.type&&s[n]===e?r.push(s):"connect"!==n||s.from!==e&&s.to!==e||r.push(s)}}catch(c){l=!0,i=c}finally{try{o||null==u.return||u.return()}finally{if(l)throw i}}return r},this.getElementOntoType=function(e){var n=t.getOntoElement(e);return!1!==n&&n.ontoType},this.getElementsByOntoType=function(e){var n=[],r=!0,o=!1,l=void 0;try{for(var i,a=t.ontoModel[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value;e===u.ontoType&&n.push(u.uri)}}catch(s){o=!0,l=s}finally{try{r||null==a.return||a.return()}finally{if(o)throw l}}return n},this.getOntoElement=function(e){var n=!0,r=!1,o=void 0;try{for(var l,i=t.ontoModel[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var a=l.value;if(a.uri===e)return a}}catch(u){r=!0,o=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return!1},this.changeOrigin=function(e,n){for(var r=0;r<t.ontoModel.length;r++)if(t.ontoModel[r].uri===e)return t.ontoModel[r].origin=n,!0;return!1},this.getLastElementUri=function(e){for(var n=t.ontoModel.length-1;n>=0;n--)if(t.ontoModel[n].fromRelation===e)return t.ontoModel[n].uri;return!1},this.getFatherOntoType=function(e){var n=[];if("father"in e){var r=!0,o=!1,l=void 0;try{for(var i,a=t.ontoModel[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value;e.father.includes(u.uri)&&n.push(u.ontoType)}}catch(s){o=!0,l=s}finally{try{r||null==a.return||a.return()}finally{if(o)throw l}}}return 0===n.length&&(n=[""]),n},this.getRelationElements=function(e,n,r,o,l,i,a,u,s){var c,f;if(""!==e&&"dataType"!==a)return"superType"===a?(c=u+e,f=n.uri.value):"subType"===a?(f=u+e,c=n.uri.value):(c=n.father[0],f=u+e),[c,f];if(2===i&&0===l){for(var d,p=!1===r?u+e:r,y=t.ontoModel.length-1;y>=0;y--)if(t.ontoModel[y].fromRelation===o){d=t.ontoModel[y];break}return d.direction!==s&&d.fromRelation===o?(t.updateOntoModel(o,s,p),o):[d.uri,p]}if("elementSelection"===a){var h=t.getElementByUri(r);return[t.ontoController.getOntoElement(h.father[0]).uri,h.uri.value]}},this.checkDuplicity=function(e){var n=!0,r=!1,o=void 0;try{for(var l,i=t.ontoModel[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){if(l.value.label===e)return!1}}catch(a){r=!0,o=a}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return!0},this.getRelatedTypes=function(e,n,r){var o=t.getElementsRelation(e,n),l=[],i=[],a=!0,u=!1,s=void 0;try{for(var c,f=o[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var d=c.value;if(d.ontoType===r){var p=e===d.to?d.from:d.to;l.push(p),i.push(t.getElementOntoType(p))}else if(!1===r&&"Arrow"!==d.ontoType)if("Relator"===d.ontoType)i.push(d.ontoType);else{var y=e===d.to?d.from:d.to;l.push(y),i.push(t.getElementOntoType(y))}}}catch(h){u=!0,s=h}finally{try{a||null==f.return||f.return()}finally{if(u)throw s}}return i},this.ontoModel=[]}),O=(n(92),function e(){Object(r.a)(this,e),this.createGraph=function(e){var t="classDiagram\n",n=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var a=l.value;if("relation"===a.type&&""!==a.from&&""!==a.to)if(console.log(a),"Arrow"===a.ontoType)t+=a.to.split("#")[1]+" --|> "+a.from.split("#")[1]+"\n";else if("Relator"===a.ontoType){if(a.from&&a.to){var u=a.fromType,s=a.toType;t+="class "+a.label+"{\n                                <<"+a.ontoType+">>\n                        }\n",t+=a.from.split("#")[1]+" "+(u?'"'+u[0]+'"':"")+" .. "+(s?'"'+u[1]+'"':"")+" "+a.label+" : <<Mediation>>\n",t+=a.label+" "+(s?'"'+s[0]+'"':"")+" .. "+(s?'"'+s[1]+'"':"")+" "+a.to.split("#")[1]+" : <<Mediation>>\n"}}else{var c=a.fromType,f=a.toType;t+=a.from.split("#")[1]+" "+(c?'"'+c+'"':"")+" .. "+(f?'"'+f+'"':"")+" "+a.to.split("#")[1]+("Row"===a.ontoType?"":" : <<"+a.ontoType+">>")+"\n"}else"relation"!==a.type&&(t+="class "+a.label+"{\n                    <<"+a.ontoType+">>\n                }\n")}}catch(d){r=!0,o=d}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return console.log(t),"classDiagram"!==t.trim()&&t}}),x=function(){function e(t){var n=this;Object(r.a)(this,e),this.ruleSelection=function(e,t,r,o,l,i){var a,u,s,c,f,d;l?s=l:(console.log(e),console.log(t),a=n.getSpecificRule(e,t),s=s=(u=n.getAdditionalRule(a,o)).length>0?u:a.offer),!1!==r?n.isElementInstace(r,i)?(d=!0,c=r.uri.value,f=n.rulesJson.questions[1].question.replace("VAL",r.label.value)):(d=!1,c=r.uri.value,f=n.rulesJson.questions[0].question.replace("VAL",r.label.value)):(c=!1,f=e.questions[2].question);var p=s.map(function(e){return{name:e,uri:c,origin:t}}.bind(n));return Promise.resolve({buttons:p,title:f,elName:d,type:"classSelection"})},this.isElementInstace=function(e,t){var r=!0,o=!1,l=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value;if(e.uri.value===u.uri.value){var s=!0,c=!1,f=void 0;try{for(var d,p=u.fatherTypeRelation[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var y=d.value;if("instanceOf"===n.delUri(y))return!0}}catch(h){c=!0,f=h}finally{try{s||null==p.return||p.return()}finally{if(c)throw f}}}}}catch(h){o=!0,l=h}finally{try{r||null==a.return||a.return()}finally{if(o)throw l}}return!1},this.elementConsistencyRules=function(e,t){var r=n.rulesJson[e.ontoType],o=[],l={superType:t.getRelatedTypes(e.uri,"to","Arrow"),subType:t.getRelatedTypes(e.uri,"from","Arrow"),connect:t.getRelatedTypes(e.uri,"connect",!1)},i=!0,a=!1,u=void 0;try{for(var s,c=r[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var f=s.value;o=n.elementConsistencySelection(f,l.connect,"connect",e,o,r,l),o=n.elementConsistencySelection(f,l.superType,"superType",e,o,r,l),o=n.elementConsistencySelection(f,l.subType,"subType",e,o,r,l)}}catch(d){a=!0,u=d}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}return n.getSpecificRule(r,"connected"),o},this.elementConsistencySelection=function(e,t,r,o,l,i,a){if(e.key===r)if(!e.type.some((function(e){return t.includes(e)}))&&e.type.length>0)l.push({key:r,types:e.type,element:o.uri,rule:e});else{var u=n.getSpecificRule(i,r+"ed",!0);if(!1!==u){var s=!0,c=!1,f=void 0;try{for(var d,p=u[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var y=d.value;y.type.some((function(e){return t.includes(e)}))&&(l=n.elementConsAddSelection("superType",y,t,l,o,a),l=n.elementConsAddSelection("subType",y,t,l,o,a),l=n.elementConsAddSelection("connect",y,t,l,o,a))}}catch(h){c=!0,f=h}finally{try{s||null==p.return||p.return()}finally{if(c)throw f}}}}return l},this.getSpecificRule=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],o=!0,l=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var s=a.value;if(s.key===t){if(!0!==n)return s;r.push(s)}}}catch(c){l=!0,i=c}finally{try{o||null==u.return||u.return()}finally{if(l)throw i}}return r.length>0&&e},this.getAdditionalRule=function(e,t){return t in e?e[t]:[]},this.commonRuleSelection=function(e,t,r){var o=[],l=[];null!==e.connect&&(e.connect.length,e.connectFrom.length);n.delUri(e.fatherType),n.delUri(e.childType);var i=!0,a=!1,u=void 0;try{for(var s,c=r[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var f=s.value;e.father.includes(f.uri)&&l.push(f.ontoType)}}catch(x){a=!0,u=x}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}var d=!0,p=!1,y=void 0;try{for(var h,m=n.rulesJson.commonRules[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var v=h.value,T=!0,b=!1,g=void 0;try{for(var E,R=v.offer[Symbol.iterator]();!(T=(E=R.next()).done);T=!0){var O=E.value;o.push({name:n.rulesJson.classes[O],uri:e.uri.value,origin:t})}}catch(x){b=!0,g=x}finally{try{T||null==R.return||R.return()}finally{if(b)throw g}}return{buttons:o,title:e.label.value,type:"elementSelection"}}}catch(x){p=!0,y=x}finally{try{d||null==m.return||m.return()}finally{if(p)throw y}}},this.delUri=function(e){var t=[];if("string"===typeof e)return e.split("#")[1];if(Array.isArray(e)){var n=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var a=l.value;t.push(a.split("#")[1])}}catch(u){r=!0,o=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return t}return""},this.rulesJson=t}return Object(o.a)(e,[{key:"elementConsAddSelection",value:function(e,t,n,r,o,l){return e in t&&!t[e].some((function(t){return l[e].includes(t)}))&&t[e].length>0&&r.push({key:e,types:t[e],element:o.uri,rule:t}),r}}]),e}(),C=function e(){var t=this;Object(r.a)(this,e),this.getDefault=function(){window.onerror=function(){alert("Error caught")};var e=t.relations[t.relationOrderIndex];return t.relation=e,t.relation.valuation.length>0?t.nextElement("Relator",t.relation.uri.value,"BRelation","from"):{buttons:t.rulesJson.bRelationRules[0].offer.map(function(t){return{name:t,uri:e.uri.value,origin:"from"}}.bind(t)),title:t.rulesJson.bRelationRules[0].question.replace("VAL",e.label.value),type:t.delUri(e.type.value)}},this.nextElement=function(){var e=Object(b.a)(T.a.mark((function e(n,r,o,l,i){var a,u,s,c,f,d,p,y,h,m,v,b,g,E,R,O,x,C,S,N,w,k;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("BRelation"!==o){e.next=4;break}return e.abrupt("return",t.relationWasSelected(n,l));case 4:if(s=o,o.includes("ontoRelation-save-bRelation")&&(o.includes("relator")?"from"===o.replace("ontoRelation-save-bRelation-relator-","")?t.ontoController.updateOntoModel(t.relation.uri.value,"fromType",n):t.ontoController.updateOntoModel(t.relation.uri.value,"toType",n):(t.ontoController.updateOntoModel(t.relation.uri.value,"fromType",n[0]),t.ontoController.updateOntoModel(t.relation.uri.value,"toType",n[1])),n=t.elSettings.selectedType,r=t.elSettings.selectedUri,o=t.elSettings.puroType,l=t.elSettings.ruleKey,i=t.elSettings.elName,a=t.elSettings.relationEl,u=t.elSettings.additionalRule),o.includes("ontoRelation")||"dataType"===o){e.next=16;break}if(u=t.ruleController.getAdditionalRule(t.ruleController.getSpecificRule(t.rulesJson[t.relationType],l),n),a=t.ontoController.getRelationElements(i,t.getElementByUri(r),r,t.relation.uri.value,u.length,t.relationRuleIndex,o,t.ontoUri,l),t.elSettings={selectedType:n,selectedUri:r,puroType:o,ruleKey:l,elName:i,relationEl:a,additionalRule:u,relType:""},a!==t.relation.uri.value){e.next=14;break}if(!1===(f=t.updateRelationTypes())){e.next=14;break}return e.abrupt("return",f);case 14:e.next=17;break;case 16:"dataType"===o?(a=[n,t.ontoUri+i],t.elSettings.relationEl=a,t.elSettings.relType="Row",t.ontoController.addToOntoModel(t.ontoUri+i,i,"Datatype","BValue",t.relation.uri,l)):(o.includes("ontoRelation-cardinality")?t.elSettings.relType=n:o.includes("ontoRelation-save")&&(c=n),n=t.elSettings.selectedType,r=t.elSettings.selectedUri,o=t.elSettings.puroType,l=t.elSettings.ruleKey,i=t.elSettings.elName,a=t.elSettings.relationEl,u=t.elSettings.additionalRule);case 17:if(!0===(d=t.getRelationRules(a,s,r,l,t.elSettings.selectedType,t.elSettings.relType,c))){e.next=20;break}return e.abrupt("return",Promise.resolve(d));case 20:if(null===t.valuationArr){e.next=30;break}if(!(t.valuationArr.length>0)){e.next=28;break}return p=[{name:t.valuationArr[0].el,uri:t.valuationArr[0].valuation,origin:l}],y="Which Datatype represents "+t.delUri(t.valuationArr[0].valuation)+"?",t.valuationArr.shift(),e.abrupt("return",Promise.resolve({buttons:p,title:y,type:"dataType",elName:!0}));case 28:if(0!==t.valuationArr.length){e.next=30;break}return e.abrupt("return",t.nextTreeBranch(l));case 30:if(t.ontoController.addToOntoModel(r,t.delUri(r),n,t.delUri(t.selectedEl.type.value),t.relation.uri.value,l,void 0,void 0,i),!(u.length>0)){e.next=37;break}return t.selectedEl=t.getNextElement,console.log(u),e.abrupt("return",Promise.resolve(t.ruleController.ruleSelection(void 0,l,t.selectedEl,void 0,u,t.queryTree)));case 37:if(0===t.elementsWithoutType.length&&(t.elementsWithoutType=t.checkElementsInRelationTree(t.relationTree,t.ontoController.getOntoModel())),!(t.elementsWithoutType.length>0&&t.withoutTypeIndex<t.elementsWithoutType.length)){e.next=44;break}return h=t.getElementByUri(t.elementsWithoutType[t.withoutTypeIndex].uri.value),t.withoutTypeIndex++,e.abrupt("return",Promise.resolve(t.ruleController.commonRuleSelection(h,l,t.ontoController.getOntoModel())));case 44:if(""===t.ontoController.getOntoElement(t.relation.uri.value).from&&(m=t.ontoController.getLastElementUri(t.relation.uri.value),t.ontoController.updateOntoModel(t.relation.uri.value,l,m)),!((v=t.checkElementsConsistency(t.relation.uri.value,l)).length>0)){e.next=87;break}if(b="",console.log(v),!("question"in v[0].rule)){e.next=82;break}g=!0,E=!1,R=void 0,e.prev=53,O=t.rulesJson.questions[Symbol.iterator]();case 55:if(g=(x=O.next()).done){e.next=63;break}if((C=x.value).type!==v[0].rule.question){e.next=60;break}return b=C.question,e.abrupt("break",63);case 60:g=!0,e.next=55;break;case 63:e.next=69;break;case 65:e.prev=65,e.t0=e.catch(53),E=!0,R=e.t0;case 69:e.prev=69,e.prev=70,g||null==O.return||O.return();case 72:if(e.prev=72,!E){e.next=75;break}throw R;case 75:return e.finish(72);case 76:return e.finish(69);case 77:b=""===b?v[0].question:b,S=v[0].key in v[0].rule?v[0].rule[v[0].key][0]:v[0].rule.type[0],b=b.replace("VAL",t.delUri(v[0].element)).replace("TyPe",S),e.next=83;break;case 82:b="What is "+v[0].key+" of "+t.delUri(v[0].element);case 83:return N=v[0].types.map(function(e){return{name:e,uri:v[0].element,origin:l}}.bind(t)),e.abrupt("return",Promise.resolve({buttons:N,title:b,type:v[0].key,elName:!0}));case 87:if(!(t.relationRuleIndex>1)){e.next=96;break}if(t.setIndexexToDefault(),t.relationOrderIndex++,t.relationOrderIndex!==t.relations.length){e.next=95;break}return alert("Transformation is comlete!!!"),e.abrupt("return",Promise.resolve({buttons:[],title:"The End",type:"end"}));case 95:return e.abrupt("return",Promise.resolve(t.getDefault()));case 96:if(null!==t.valuationArr){e.next=103;break}if(t.valuationArr=t.getAllTreeValuations(l),!(t.valuationArr.length>0)){e.next=103;break}return w="Which Datatype represents "+t.delUri(t.valuationArr[0].valuation)+"?",k=[{name:t.valuationArr[0].el,uri:t.valuationArr[0].valuation,origin:l}],t.valuationArr.shift(),e.abrupt("return",{buttons:k,title:w,type:"dataType",elName:!0});case 103:return e.abrupt("return",t.nextTreeBranch(l));case 104:case"end":return e.stop()}}),e,null,[[53,65,69,77],[70,,72,76]])})));return function(t,n,r,o,l){return e.apply(this,arguments)}}(),this.updateRelationTypes=function(){var e=t.ontoController.getOntoElement(t.relation.uri.value);if(void 0!==e.to&&void 0!==e.from){if("Relator"===e.ontoType&&void 0===e.fromType){var n=t.ruleController.getSpecificRule(t.rulesJson[e.ontoType],"cardinality");return t.createRelCardinalityBtn("ontoRelation-save-bRelation-relator-from",n,"from",e.from,e.uri)}if("Relator"===e.ontoType&&void 0===e.toType){var r=t.ruleController.getSpecificRule(t.rulesJson[e.ontoType],"cardinality");return t.createRelCardinalityBtn("ontoRelation-save-bRelation-relator-to",r,"to",e.uri,e.to)}if(void 0===e.toType&&void 0===e.fromType){var o=t.ruleController.getSpecificRule(t.rulesJson[e.ontoType],"cardinality");return t.createRelCardinalityBtn("ontoRelation-save-bRelation",o,"to",e.from,e.to)}}return!1},this.nextTreeBranch=function(e){if(""===t.ontoController.getOntoElement(t.relation.uri.value).from){var n=t.ontoController.getLastElementUri(t.relation.uri.value);t.ontoController.updateOntoModel(t.relation.uri.value,e,n)}var r;return t.relationRuleIndex++,t.relationTreeIndex===t.relationTreeArr.length?(e=0===t.relationRuleIndex?"from":"to",r=t.getRelatedElements(t.relation,e)):r=Promise.resolve(t.relationTreeArr),new Promise((function(n){r.then(function(t){this.valuationArr=null,n(this.handleRelatedElements(t,"nextElement",e))}.bind(t))}))},this.getAllTreeValuations=function(e){var n=[],r=!0,o=!1,l=void 0;try{for(var i,a=t.relationTree[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value,s=t.getElementByUri(u.uri.value);if(s.valuation.length>0){var c=!0,f=!1,d=void 0;try{for(var p,y=s.valuation[Symbol.iterator]();!(c=(p=y.next()).done);c=!0){var h=p.value;n.push({el:s.uri.value,valuation:h})}}catch(R){f=!0,d=R}finally{try{c||null==y.return||y.return()}finally{if(f)throw d}}}}}catch(R){o=!0,l=R}finally{try{r||null==a.return||a.return()}finally{if(o)throw l}}if("from"===e){var m=!0,v=!1,T=void 0;try{for(var b,g=t.relation.valuation[Symbol.iterator]();!(m=(b=g.next()).done);m=!0){var E=b.value;n.push({el:t.relation.uri.value,valuation:E})}}catch(R){v=!0,T=R}finally{try{m||null==g.return||g.return()}finally{if(v)throw T}}}return n},this.getGraphSvg=function(){var e=t.ontoController.getOntoModel();return t.imageController.createGraph(e)},this.createRelCardinalityBtn=function(e,n,r,o,l,i,a){e+="dataType"===i?"-daType":"";var u=n.fromT.map(function(e){return{name:e,uri:a,origin:r,direction:"from"}}.bind(t));return{buttons:n.fromT.map(function(e){return{name:e,uri:a,origin:r,direction:"to"}}.bind(t)).concat(u),title:"Select cardinality between elements",type:e,elName:[t.delUri(o),t.delUri(l)]}},this.getRelationRules=function(e,n,r,o,l,i,a){var u,s,c,f,d,p=n.replace("ontoRelation-",""),y=t.rulesJson.relationRules;return!Array.isArray(e)||(u=e[0],s=e[1],c=!1===(c=t.ontoController.getElementOntoType(u))?l:c,f=!1===(f=t.ontoController.getElementOntoType(s))?l:f,d=t.findRule(y,["from",c,"to",f]),"cardinality"!==p&&"dataType"!==p&&1!==d.offer.length||p.includes("save")?p.includes("save")?(t.ontoController.addRelation(i,u,s,"uriDomyslet","nazev",a[0],a[1]),!0):{buttons:d.offer.map(function(e){return{name:e,uri:r,origin:o}}.bind(t)),title:"Which type of relation is between "+t.delUri(u)+" and "+t.delUri(s)+"?",type:"ontoRelation-cardinality"}:"fromT"in d&&"toT"in d?(t.elSettings.selectedType=1===d.offer.length?d.offer[0]:t.elSettings.selectedType,t.createRelCardinalityBtn("ontoRelation-save",d,o,u,s,p,r)):(i=1===d.offer.length?d.offer[0]:i,t.ontoController.addRelation(i,u,s,"uriDomyslet","nazev","",""),!0))},this.findRule=function(e,t){var n=!1,r=!0,o=!1,l=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value;n=!1;for(var s=0;s<t.length;s+=2){var c=!0,f=!1,d=void 0;try{for(var p,y=u[t[s]][Symbol.iterator]();!(c=(p=y.next()).done);c=!0){var h=p.value;if(t[s+1]===h||"*"===h){if(!0===n)return u;n=!0;break}}}catch(m){f=!0,d=m}finally{try{c||null==y.return||y.return()}finally{if(f)throw d}}}}}catch(m){o=!0,l=m}finally{try{r||null==a.return||a.return()}finally{if(o)throw l}}return!1},this.relationWasSelected=function(e,n){t.relation=t.relations[t.relationOrderIndex],t.relationType=e;var r,o=t.rulesJson[e];return r=t.relationTreeArr.length===t.relationTreeIndex?t.getRelatedElements(t.relation,n):Promise.resolve(t.relationTreeArr),t.relationRuleIndex++,t.ontoController.addRelation(e,"","",t.relation.uri.value,t.relation.label.value),new Promise((function(e){r.then(function(t){e(this.handleRelatedElements(t,"relationWasSelected",n,o))}.bind(t))}))},this.handleRelatedElements=function(e,n,r,o){if(t.relationTreeArr=e,t.relationTree=e[t.relationTreeIndex],t.relationTreeIndex++,t.relationIndex=t.relationTree.length-1,"relationWasSelected"===n){t.selectedEl=t.getNextElement();var l=t.getElementByUri(t.selectedEl.uri.value),i=[];if(l.father.length>0){var a=t.ontoController.getElementOntoType(l.father[0]);!1!==a&&(console.log(l),i=t.ruleController.getAdditionalRule(t.ruleController.getSpecificRule(o,r),a))}return 0===i.length?t.ruleController.ruleSelection(o,r,t.selectedEl,void 0,void 0,t.queryTree):t.ruleController.ruleSelection(void 0,r,t.selectedEl,void 0,i,t.queryTree)}var u=t.rulesJson[t.relationType];return t.selectedEl=t.relationTree[t.relationIndex],t.relationIndex--,t.ruleController.ruleSelection(u,r,t.selectedEl,void 0,void 0,t.queryTree)},this.checkElementsInRelationTree=function(e,n){var r=[],o=!0,l=!0,i=!1,a=void 0;try{for(var u,s=e[Symbol.iterator]();!(l=(u=s.next()).done);l=!0){var c=u.value;o=!0;var f=!0,d=!1,p=void 0;try{for(var y,h=n[Symbol.iterator]();!(f=(y=h.next()).done);f=!0){var m=y.value;c.uri.value===m.uri&&(o=!1)}}catch(v){d=!0,p=v}finally{try{f||null==h.return||h.return()}finally{if(d)throw p}}!0!==o||t.isElementUseless(c)||t.isElementInstace(c)||r.push(c)}}catch(v){i=!0,a=v}finally{try{l||null==s.return||s.return()}finally{if(i)throw a}}return r},this.getRelatedElements=function(e,n){t.elementConsitencyTree=[],t.elementConsistencyIndex=0,t.relationTreeIndex=0,t.relationTreeArr=[];var r=[],o=!0,l=!1,i=void 0;try{for(var a,u=e[n][Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var s=a.value;r.push(t.rdfController.getRelationBTypes(s))}}catch(c){l=!0,i=c}finally{try{o||null==u.return||u.return()}finally{if(l)throw i}}return Promise.all(r).then((function(r){for(var o=0;o<r.length;o++)r[o].length>0?r[o].unshift(t.getElementByUri(e[n][o])):r[o]=[t.getElementByUri(e[n][o])];return r}))},this.delUri=function(e){var t=[];if("string"===typeof e)return e.split("#")[1];if(Array.isArray(e)){var n=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var a=l.value;t.push(a.split("#")[1])}}catch(u){r=!0,o=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return t}return""},this.l=function(e){console.log("CECKKKKKKKKKKKKKKKKKKKKK"),console.log(e)},this.getNextElement=function(){var e,n=t.ontoController.getOntoModel();t.isElementUseless(t.relationTree[t.relationIndex])&&t.relationIndex--;for(var r=0;r<n.length;r++)n[r].uri===t.relationTree[t.relationIndex].uri.value&&(t.relationIndex--,r=0);return e=t.relationTree[t.relationIndex],t.relationIndex--,e},this.isElementInstace=function(e){var n=!0,r=!1,o=void 0;try{for(var l,i=t.queryTree[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var a=l.value;if(e.uri.value===a.uri.value){var u=!0,s=!1,c=void 0;try{for(var f,d=a.fatherTypeRelation[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var p=f.value;if("instanceOf"===t.delUri(p))return!0}}catch(y){s=!0,c=y}finally{try{u||null==d.return||d.return()}finally{if(s)throw c}}}}}catch(y){r=!0,o=y}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return!1},this.checkElementsConsistency=function(e,n){var r=t.ontoController.getOntoModel();if(0===t.elementConsitencyTree.length){var o=!0,l=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var s=a.value;s.fromRelation===e&&s.direction===n&&t.elementConsitencyTree.push(s)}}catch(f){l=!0,i=f}finally{try{o||null==u.return||u.return()}finally{if(l)throw i}}if(0===t.elementConsitencyTree.length)return t.elementConsitencyTree}t.ontoController.getOntoElement(t.relation.uri.value);for(var c=t.ruleController.elementConsistencyRules(t.elementConsitencyTree[t.elementConsistencyIndex],t.ontoController);t.elementConsitencyTree.length<t.elementConsistencyIndex&&0===c.length;)t.elementConsistencyIndex++,c=t.ruleController.elementConsistencyRules(t.elementConsitencyTree[t.elementConsistencyIndex],t.ontoController);return c},this.isElementUseless=function(e){return"child"in e&&0===e.child.length&&0===e.connect.length&&0===e.connectFrom.length},this.getElementByUri=function(e){var n=!0,r=!1,o=void 0;try{for(var l,i=t.queryTree[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var a=l.value;if(a.uri.value===e)return a}}catch(u){r=!0,o=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return!1},this.checkDuplicity=function(e){return t.ontoController.checkDuplicity(e)},this.getConnectedElements=function(e,n){var r=[],o=!0,l=!1,i=void 0;try{for(var a,u=n[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var s=a.value,c=t.ontoController.getElementOntoType(s);if(!1===c||e[t.ruleIndex].connect.includes(c)){var f=!1!==c?t.delUri(s)+" ["+c+"]":t.delUri(s);r.push({name:f,uri:s})}}}catch(d){l=!0,i=d}finally{try{o||null==u.return||u.return()}finally{if(l)throw i}}return r},this.setIndexexToDefault=function(){t.valuationArr=null,t.relationRuleIndex=0,t.relationTree={},t.relationTreeIndex=0,t.relationTreeArr=[],t.elementsWithoutType=[],t.withoutTypeIndex=0,t.elementConsistencyIndex=0,t.elementConsitencyTree=[]},this.rulesJson=JSON.parse(JSON.stringify(g)),this.rdfController=new E,this.ontoController=new R,this.imageController=new O,this.ruleController=new x(this.rulesJson),this.rdfController.getFullPath().then(function(e){this.queryTree=e,console.log(e)}.bind(this)),this.rdfController.getRelations().then(function(e){this.relations=e,console.log(e)}.bind(this)),this.ontoUri="http://lod2-dev.vse.cz/data/ontomodels#",this.selectedEl=null,this.elSettings={},this.relationOrderIndex=0,this.relation=null,this.relationIndex=0,this.relationType=null,this.relationTreeIndex=0,this.relationTreeArr=[],this.setIndexexToDefault()},S=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(i.a)(t).call(this,e))).handleChange=function(e){n.setState({elName:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),window.addEventListener("unhandledrejection",(function(e){alert("Rule is not defined!\nOnly the first answer is correct! \nRules are not complete yet!\nPage will be reloaded!"),window.location.reload()})),y()("#tools").empty();var t=n.eventController.getDefault();n.setState({buttons:t.buttons,title:t.title,type:t.type,startTransform:!1})},n.handleClick=function(e,t,r,o){var l=n.state.elName;""===l&&!0===n.state.changeName?alert("Plese write name of the element!"):""===(l=l.replace(/\s/g,"_"))||!0!==n.state.changeName||n.eventController.checkDuplicity(l)?n.eventController.nextElement(e,t,r,o,l).then(function(e){console.log("call"),console.log(e);var t=this.eventController.getGraphSvg();this.setState({buttons:e.buttons,type:e.type,title:e.title,elName:"",changeName:e.elName}),!1!==t&&this.createGraph(t)}.bind(Object(a.a)(n))):alert("Element already exists! Please choose different name.")},n.handleClickName=function(e){n.setState({changeName:!e})},n.state={fieldValue:"",chart:"",title:"",fatherUrl:"",startTransform:!0,buttons:[],order:0,ontoModel:[],queryRoots:[],roots:[],changeName:!1,elName:"",type:""},n.eventController=new C,m.a.initialize({startOnLoad:!1}),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"createGraph",value:function(e){var t=function(e){this.setState({chart:e})}.bind(this);m.a.render("id1",e,t)}},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"form-group col-md-6",id:"graph"},c.a.createElement("label",{htmlFor:"exampleFormControlTextarea1"},"Puro model"),c.a.createElement("div",{className:"form-control  transformWindow embed-responsive",id:"exampleFormControlTextarea1"},c.a.createElement(N,null))),c.a.createElement("div",{className:"form-group col-md-6",id:"graph"},c.a.createElement("label",{htmlFor:"exampleFormControlTextarea1"},"Onto model"),c.a.createElement("div",{className:"form-control transformWindow",id:"exampleFormControlTextarea1"},c.a.createElement(w,{chart:this.state.chart}))),c.a.createElement(k,{startTransform:this.state.startTransform,type:this.state.type,title:this.state.title,onChange:this.handleChange,elName:this.state.elName,buttons:this.state.buttons,onClick:this.handleClick,onClickName:this.handleClickName,changeName:this.state.changeName,onSubmit:this.handleSubmit})))}}]),t}(c.a.Component),N=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(a)))).loaded=function(){y()("#iframePuro").empty()},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement("iframe",{onLoad:this.loaded,id:"iframePuro",className:"embed-responsive-item",src:"http://protegeserver.cz/purom4/?model=ca151b74998bee07d442652cc100f821"})}}]),t}(c.a.Component),w=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.chart}})}}]),t}(c.a.Component),k=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"container-fluid text-center questionPart"},c.a.createElement("button",{type:"Submint",className:this.props.startTransform?"btn btn-primary":"d-none","data-toggle":"modal","data-target":"#exampleModal",onClick:this.props.onSubmit},"Start transformation"),c.a.createElement("div",{className:this.props.startTransform?"d-none":""},c.a.createElement("h3",null,this.props.title),c.a.createElement("div",{className:!0===this.props.changeName?"col-md-6 mx-auto":"d-none"},c.a.createElement("div",{className:"input-group inputName"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text",id:""},"Name of the element:")),c.a.createElement("input",{placeholder:"Write name of the new element!",type:"text",className:"form-control",onChange:this.props.onChange,value:this.props.elName})),c.a.createElement("h5",{className:this.props.buttons.lenght>1?"text-center inputName":"d-none"},"Select element's class:")),c.a.createElement("div",{className:"divButtons text-center"},c.a.createElement(I,{buttons:this.props.buttons,onClick:this.props.onClick,type:this.props.type,elNames:this.props.changeName})),c.a.createElement("div",{className:"text-right col-md-6 mx-auto divLowBtn"},c.a.createElement("button",{type:"button",className:"btn btn-primary btnModal",onClick:function(){return alert("Will be implemented!")}},"Undo"),c.a.createElement("button",{type:"button",className:"btn btn-secondary btnModal","data-dismiss":"modal"},"Cancel"))))}}]),t}(c.a.Component),I=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(i.a)(t).call(this,e))).refs=c.a.createRef(),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.props.type.includes("ontoRelation-save")?c.a.createElement("div",{className:"row col-md-4 mx-auto"},c.a.createElement("label",{className:"label label-default col-md-6 mx-auto form-control"},this.props.elNames[0]),c.a.createElement("label",{className:"label label-default col-md-6 mx-auto form-control"},this.props.elNames[1]),c.a.createElement("select",{ref:"relFrom",className:"col-md-6 mx-auto form-control cardinalitySelect"},this.props.buttons.filter((function(e){return"from"===e.direction})).map((function(e){return c.a.createElement("option",{value:e.name},e.name)}))),c.a.createElement("select",{ref:"relTo",className:"col-md-6 mx-auto form-control cardinalitySelect"},this.props.buttons.filter((function(e){return"to"===e.direction})).map((function(e){return c.a.createElement("option",{value:e.name},e.name)}))),c.a.createElement("button",{className:"btn btn-success mx-auto questionPart",onClick:function(){return e.props.onClick([e.refs.relFrom.value,e.refs.relTo.value],null,e.props.type)}},"Next")):this.props.type.includes("end")?c.a.createElement("div",{className:"col-md-4 mx-auto"},c.a.createElement("button",{className:"btn btn-success"},"Download Onto-UML graph")):c.a.createElement("div",{className:"row col-md-4 mx-auto"},this.props.buttons.map((function(t){return c.a.createElement("div",{className:"col-md-4 mx-auto"},c.a.createElement("button",{key:e.props.uri,type:"button",className:"btn btn-success btnModal",onClick:function(){return e.props.onClick(t.name,t.uri,e.props.type,t.origin)}},e.props.type.includes("dataType")?"Next":t.name))})))}}]),t}(c.a.Component),P=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return[c.a.createElement(S,null)]}}]),t}(c.a.Component);d.a.render(c.a.createElement(P,null),document.getElementById("root"))}},[[420,1,2]]]);
//# sourceMappingURL=main.77143f8b.chunk.js.map